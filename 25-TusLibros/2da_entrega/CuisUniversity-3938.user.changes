

----STARTUP---- (29 October 2019 20:46:04) as /home/diego/Downloads/cuis/linux64 (1)/linux64/CuisUniversity-3938.image!


----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Decorator.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Adapter.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Proxy.st----!

Object subclass: #A
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba-identidad'!

!classDefinition: #A category: #'prueba-identidad' stamp: 'd b 10/29/2019 21:56:32'!
Object subclass: #A
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba-identidad'!

Object subclass: #B
	instanceVariableNames: 'decoratee'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba-identidad'!

!classDefinition: #B category: #'prueba-identidad' stamp: 'd b 10/29/2019 21:56:41'!
Object subclass: #B
	instanceVariableNames: 'decoratee'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba-identidad'!
!B methodsFor: 'no messages' stamp: 'd b 10/29/2019 21:57:07'!
initializeWith: collab
	decoratee := collab.! !
!A methodsFor: 'no messages' stamp: 'd b 10/29/2019 21:57:19'!
m1
! !
!A methodsFor: 'as yet unclassified' stamp: 'd b 10/29/2019 21:57:22'!
m2
	^self m1! !
!B methodsFor: 'nil' stamp: 'd b 10/29/2019 21:57:46'!
m1
	^decoratee m1! !
!B methodsFor: 'as yet unclassified' stamp: 'd b 10/29/2019 21:57:49'!
m2
	^decoratee m2! !

A := A new.!

b := B initializeWith: A.p!

b := B new initializeWith: A.!

----QUIT----(29 October 2019 22:01:02) CuisUniversity-3938.image priorSource: 14319118!

----STARTUP---- (29 October 2019 22:01:14) as /home/diego/Downloads/cuis/linux64 (1)/linux64/CuisUniversity-3938.image!


Object subclass: #A
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba'!

!classDefinition: #A category: #prueba stamp: 'd b 10/29/2019 22:01:32'!
Object subclass: #A
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba'!

Object subclass: #B
	instanceVariableNames: 'decoratee'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba'!

!classDefinition: #B category: #prueba stamp: 'd b 10/29/2019 22:01:37'!
Object subclass: #B
	instanceVariableNames: 'decoratee'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'prueba'!
!A methodsFor: 'no messages' stamp: 'd b 10/29/2019 22:01:50'!
m2
	self m1! !
!A methodsFor: 'as yet unclassified' stamp: 'd b 10/29/2019 22:01:56'!
m1
	self halt.! !
!B methodsFor: 'no messages' stamp: 'd b 10/29/2019 22:02:08'!
m1
	^decoratee m1! !
!B methodsFor: 'as yet unclassified' stamp: 'd b 10/29/2019 22:02:13'!
m2
	^decoratee m2! !

a := A new.!
!B methodsFor: 'as yet unclassified' stamp: 'd b 10/29/2019 22:02:40'!
initializeWith: a
	decoratee:=a! !

b := B new initializeWith: a.!

b m1!

b m2!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Adapter.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Decorator.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Proxy.st----!

b m2!

AdapterExamples genericCustomer2DrawableAdapterExample !

AdapterExamples new genericCustomer2DrawableAdapterExample !
!AdapterExamples methodsFor: 'examples' stamp: 'd b 10/29/2019 22:54:51' prior: 50778154!
genericCustomer2DrawableAdapterExample

	"Esta es la manera de instanciar PluggableAdapter para adaptar asDrawable a instancias de Customer
	Recordar de debuggearlo para entenderlo bien - Hernan"
	
	| customer adapter entryField canvas |
	self halt.
	customer := Customer new.
	adapter := PluggableAdapter adapting: #asDrawable with: [ customer name, ' ', customer lastName ].
	entryField := EntryField showing: adapter.
	canvas := Canvas new.
	
	entryField drawWith: canvas.! !

AdapterExamples new genericCustomer2DrawableAdapterExample !

Object subclass: #NameOfSubclass
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #NameOfSubclass category: #'25-TusLibros' stamp: 'd b 10/29/2019 23:13:50'!
Object subclass: #NameOfSubclass
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

TestCase subclass: #ApiCarritoTests
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #ApiCarritoTests category: #'25-TusLibros' stamp: 'd b 10/29/2019 23:14:18'!
TestCase subclass: #ApiCarritoTests
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #NameOfSubclass stamp: 'd b 10/29/2019 23:14:22'!
Object subclass: #NameOfSubclass
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!ApiCarritoTests methodsFor: 'nil' stamp: 'd b 10/29/2019 23:14:30'!
test01! !

----STARTUP---- (29 October 2019 23:14:59) as /home/diego/Downloads/cuis/linux64 (1)/linux64/CuisUniversity-3938.image!


----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/25-TusLibros.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Adapter.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Decorator.st----!

----End fileIn of /home/diego/Downloads/cuis/linux64 (1)/linux64/DesignPatterns-Proxy.st----!

----QUIT----(29 October 2019 23:15:30) CuisUniversity-3938.image priorSource: 14319118!

----STARTUP---- (29 October 2019 23:18:58) as /home/diego/linux64/CuisUniversity-3938.image!


----End fileIn of /home/diego/linux64/Portfolio-Solucion-Bonus-Track.st----!

----End fileIn of /home/diego/linux64/Portfolio-TreePrinter-ConBonusTrack.st----!

----End fileIn of /home/diego/linux64/TerniLapilli.st----!

----QUIT----(29 October 2019 23:19:29) CuisUniversity-3938.image priorSource: 14334781!

----STARTUP---- (30 October 2019 20:05:26) as /home/diego/linux64/CuisUniversity-3938.image!

!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:10:30'!
test01AfterCreateCartIsEmpty
! !

!methodRemoval: ApiCarritoTests #test01 stamp: 'd b 10/30/2019 20:10:33'!
test01!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:12:30'!
test02AfterAddingBookToCartIsInCartList

! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:13:15'!
test03AddingBookToCartNeedsQuantityGreaterThanZero


! !

!classDefinition: #TusLibrosApi category: #'25-TusLibros' stamp: 'd b 10/30/2019 20:20:02'!
Object subclass: #TusLibrosApi
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:19:53' prior: 50784240!
test01AfterCreateCartIsEmpty
	| clientId clientPassw resource api |
	
	api := TusLibrosApi new.
	resource := 'createCart'.
	clientId := 918.
	
	
	
	! !

----End fileIn of /home/diego/linux64/Packages/TerseGuide.pck.st----!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:24:56'!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw resource api |
	
	api := TusLibrosApi new.
	resource := 'createCart'.
	clientId := 918.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request status_code at: 1) = '0'.
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:25:10' prior: 50787280!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi new.
	clientId := 918.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request status_code at: 1) = '0'.
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:25:19'!
test02AfterCreateCartIsEmpty
	| clientId clientPassw resource api |
	
	api := TusLibrosApi new.
	resource := 'createCart'.
	clientId := 918.
	
	
	
	! !

!methodRemoval: ApiCarritoTests #test01AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 20:25:31'!
test01AfterCreateCartIsEmpty
	| clientId clientPassw resource api |
	
	api := TusLibrosApi new.
	resource := 'createCart'.
	clientId := 918.
	
	
	
	!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:25:37'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:25:37'!
ERROR!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:26:36'!
createCartForClient: aSmallInteger andPassword: aString 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:28:10' prior: 50787327!
createCartForClient: aClientId andPassword: aPassword
	
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClientPasswordIsValid: aPassword.
	 
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:31:38' prior: 50787333!
createCartForClient: aClientId andPassword: aPassword
	| params |
	params := Dictionary new.
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClientPasswordIsValid: aPassword.
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	self request: 'createCart' withParams: params.
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:31:44' prior: 50787341!
createCartForClient: aClientId andPassword: aPassword
	| params |
	params := Dictionary new.
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClientPasswordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	self request: 'createCart' withParams: params.
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:32:12' prior: 50787354!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClientPasswordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	response := self request: 'createCart' withParams: params.
	^response status.
	! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:32:47'!
assertClientIdIsFromRegisteredClient: aSmallInteger 
	self shouldBeImplemented.! !

!classDefinition: #TusLibrosApi category: #'25-TusLibros' stamp: 'd b 10/30/2019 20:34:14'!
Object subclass: #TusLibrosApi
	instanceVariableNames: 'tusLibrosStorage'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:34:11' prior: 50787381!
assertClientIdIsFromRegisteredClient: aClientId
	^tusLibrosStorage checkClientExists: aClientId.
! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:34:21'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:34:29'!
ERROR!

Object subclass: #NameOfSubclass
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #NameOfSubclass category: #'25-TusLibros' stamp: 'd b 10/30/2019 20:35:05'!
Object subclass: #NameOfSubclass
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

Object subclass: #TusLibrosApi
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #TusLibrosApi category: #'25-TusLibros' stamp: 'd b 10/30/2019 20:35:13'!
Object subclass: #TusLibrosApi
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #NameOfSubclass stamp: 'd b 10/30/2019 20:35:17'!
Object subclass: #NameOfSubclass
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:35:24' prior: 50787394!
assertClientIdIsFromRegisteredClient: aClientId
	^tusLibrosStorageManager checkClientExists: aClientId.
! !

Object subclass: #StorageManager
	instanceVariableNames: 'clients'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #StorageManager category: #'25-TusLibros' stamp: 'd b 10/30/2019 20:35:59'!
Object subclass: #StorageManager
	instanceVariableNames: 'clients'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!StorageManager methodsFor: 'no messages' stamp: 'd b 10/30/2019 20:36:32'!
checkClientExists: aClientId
	^clients keys includes: aClientId.! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:37:17'!
checkClient: aClientId passwordIsValid: aPassw
	^(clients at: aClientId value) = aPassw .! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:37:56'!
assertClientPasswordIsValid: aPassword! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:38:23'!
assertClient: aClientId PasswordIsValid: aPassword
	^tusLibrosStorageManager checkClientExists: aPassword.! !

!methodRemoval: TusLibrosApi #assertClientPasswordIsValid: stamp: 'd b 10/30/2019 20:38:28'!
assertClientPasswordIsValid: aPassword!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:38:41' prior: 50787367!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClient: aClientId passwordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	response := self request: 'createCart' withParams: params.
	^response status.
	! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:38:58'!
assertClient: aClientId passwordIsValid: aPassword
	^tusLibrosStorageManager checkClientExists: aPassword.! !

!methodRemoval: TusLibrosApi #assertClient:PasswordIsValid: stamp: 'd b 10/30/2019 20:38:58'!
assertClient: aClientId PasswordIsValid: aPassword
	^tusLibrosStorageManager checkClientExists: aPassword.!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:39:23'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:39:23'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:39:35'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:39:44'!
ERROR!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 20:40:30' prior: 50787497!
assertClient: aClientId passwordIsValid: aPassword
	^tusLibrosStorageManager checkClient: aClientId passwordIsValid: aPassword.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:40:49'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:40:49'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:41:15'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterAddingBookToCartIsInCartList stamp: 'd b 10/30/2019 20:41:15'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 20:41:15'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 20:41:15'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:41:15'!
ERROR!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:41:31' prior: 50787293!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := 918.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request status_code at: 1) = '0'.
	
	! !
!TusLibrosApi class methodsFor: 'no messages' stamp: 'd b 10/30/2019 20:41:40'!
initialize
	
	^self! !
!TusLibrosApi class methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:41:48' prior: 50787566!
initialize
	
	^self! !
!TusLibrosApi class methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:42:10' prior: 50787570!
initialize

	^self new initialize! !
!TusLibrosApi methodsFor: 'nil' stamp: 'd b 10/30/2019 20:42:25'!
initialize
	tusLibrosStorageManager := StorageManager new.
	^self! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:42:36'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:42:36'!
ERROR!
!StorageManager methodsFor: 'nil' stamp: 'd b 10/30/2019 20:43:09'!
initialize
	clients := Dictionary new.
	^self! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:43:12'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:43:12'!
ERROR!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:43:48' prior: 50787589!
initialize
	clients := Dictionary new.
	"""TODO: temporal para probar"""
	clients add: '123'->'passfacil'.
	^self! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:43:59' prior: 50787554!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := 123.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request status_code at: 1) = '0'.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:44:00'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:44:00'!
ERROR!

aClientId!

aPassw!

clients!

clients at:123!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:45:07' prior: 50787457!
checkClientExists: aClientId
	^clients includesKey: aClientId.! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:45:36' prior: 50787462!
checkClient: aClientId passwordIsValid: aPassw
	^clients at: aClientId = aPassw .! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:45:39'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:45:39'!
ERROR!

clients!

clients at:123!

clients keys!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:47:09' prior: 50787608!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request status_code at: 1) = '0'.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:47:12'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:47:12'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:47:16'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:47:16'!
ERROR!

aClientId !

clients!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:48:20' prior: 50787601!
initialize
	clients := Dictionary new.
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:48:23'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:48:23'!
ERROR!

aClientId !

aPassw!

clients!

clients at:'123'!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 20:48:57' prior: 50787635!
checkClient: aClientId passwordIsValid: aPassw
	^(clients at: aClientId) = aPassw .! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:49:00'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:49:00'!
ERROR!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:49:31'!
request: aString withParams: aDictionary 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:50:07' prior: 50787704!
request: aStringOfResource withParams: params 
	
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:50:38' prior: 50787709!
request: aStringOfResource withParams: params 
	^'0|999'
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:51:16'!
ERROR!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:52:04' prior: 50787483!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	self assertClientIdIsFromRegisteredClient: aClientId.
	self assertClient: aClientId passwordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	response := self request: 'createCart' withParams: params.
	^response.
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:52:17' prior: 50787649!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: request = '0'.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:52:21'!
FAILURE!

request!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:52:41' prior: 50787737!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request at: 1) = '0'.
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:52:41' prior: 50787752!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request at: 1) = '0'.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:53:15'!
FAILURE!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:53:15'!
FAILURE!

request at:1!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:53:30' prior: 50787764!
test01AfterCreateCartResponseCodeIs0
	| request clientId clientPassw api |
	
	api := TusLibrosApi initialize.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api createCartForClient: clientId andPassword: clientPassw.
	
	self assert: (request at: 1) = $0.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 20:53:31'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:53:41'!
test03AfterAddingBookToCartIsInCartList

! !

!methodRemoval: ApiCarritoTests #test02AfterAddingBookToCartIsInCartList stamp: 'd b 10/30/2019 20:53:43'!
test02AfterAddingBookToCartIsInCartList

!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:53:50' prior: 50787305!
test02AfterCreateCartIsEmpty
	| clientId clientPassw api |
	
	api := TusLibrosApi new.
	clientId := 918.
	
	
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:54:02' prior: 50787807!
test02AfterCreateCartIsEmpty
	| clientId clientPassw api |
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:54:22' prior: 50787814!
test02AfterCreateCartIsEmpty
	| request clientId clientPassw api |
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := TusLibrosApi 
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:54:40' prior: 50787822!
test02AfterCreateCartIsEmpty
	| request clientId clientPassw api |
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	request := api 
	
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:56:45' prior: 50787831!
test02AfterCreateCartIsEmpty
	| request clientId clientPassw api cartId|
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	request := api createCartForClient: clientId andPassword: clientPassw.
	cartId := '999'.
	
	request := api listCart: cartId.
	
	request 
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 20:58:07' prior: 50787840!
test02AfterCreateCartIsEmpty
	| request clientId clientPassw api cartId|
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	request := api createCartForClient: clientId andPassword: clientPassw.
	cartId := '999'.
	
	request := api listCart: cartId.
	
	self assert: (request at: 1) = 0.
	self assert: (request size) = 2. "supongo que respondera '0|' sin nada despues de pipe"
	! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 20:58:11'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 20:58:11'!
ERROR!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 20:58:21'!
listCart: aString 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:00:57' prior: 50787873!
listCart: aCartId
	| params request |
	params := Dictionary new.
	params at: 'cartId' put: aCartId.
	
	self assertCartIdIsValid: aCartId.
	
	request := self request: 'listCart' withParams: params.
	^request.
	
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:01:17'!
assertCartIdIsValid: aString 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:01:25' prior: 50787887!
assertCartIdIsValid: aCartId

	^true.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:01:37' prior: 50787892!
assertCartIdIsValid: aCartId

	^true.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:04:25' prior: 50787714!
request: aStringOfResource withParams: params 
	"^'0|999'."
	aStringOfResource = 'createCart' ifTrue: [
												^'0|999'. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											]						.
										
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:04:43'!
FAILURE!

aString!

request at:1!
!TusLibrosApi class methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 21:05:39'!
ErrorResourceNotFound
	^'El recurso pedido no fue encontrado'! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 21:05:50'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:05:52'!
FAILURE!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:05:52'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:05:58' prior: 50787852!
test02AfterCreateCartIsEmpty
	| request clientId clientPassw api cartId|
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	request := api createCartForClient: clientId andPassword: clientPassw.
	cartId := '999'.
	
	request := api listCart: cartId.
	
	self assert: (request at: 1) = $0.
	self assert: (request size) = 2. "supongo que respondera '0|' sin nada despues de pipe"
	! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:05:59'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:07:14' prior: 50784250!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity |
	
	
	
! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:07:38' prior: 50787953!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity api clientId request clientPassw|
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	request := api createCartForClient: clientId andPassword: clientPassw.
	cartId := '999'.
	
	request := api listCart: cartId.! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:08:39'!
test05ListingCartItemsWithWrongCartIdReturnsError
	| cartId bookIsbn bookQuantity api clientId request clientPassw|
	
	api := TusLibrosApi new.
	clientId := '123'.
	clientPassw := 'passfacil'.
	request := api createCartForClient: clientId andPassword: clientPassw.
	cartId := '999'.
	
	request := api listCart: cartId.! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:08:44'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:09:25'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:11:47' prior: 50787959!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity api clientId response clientPassw|
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 1.
	
	response := api addToCart: cartId.
	
	self assert: response = '0|OK'.! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:12:21' prior: 50787992!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity api clientId response clientPassw|
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 1.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = '0|OK'.! !

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:12:28'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:12:28'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:12:31'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:12:40'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:12:40'!
ERROR!
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 21:12:51'!
addToCart: aString bookId: aString2 andQuantity: aSmallInteger 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 21:13:07' prior: 50788036!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 

	
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:14:19' prior: 50787878!
listCart: aCartId
	| params response |
	params := Dictionary new.
	params at: 'cartId' put: aCartId.
	
	self assertCartIdIsValid: aCartId.
	
	response := self request: 'listCart' withParams: params.
	^response.
	
	! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 21:14:52' prior: 50788042!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self assertCartIdIsValid: aCartId.
	
	response := self request: 'addToCart' withParams: params.
	
	^response
	! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 21:15:55' prior: 50787900!
request: aStringOfResource withParams: params 
	"^'0|999'."
	aStringOfResource = 'createCart' ifTrue: [
												^'0|999'. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:16:30'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:16:32'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 21:16:33'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 21:52:51'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:52:52'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:52:55'!
PASSED!

!testRun: #ApiCarritoTests #test03AfterAddingBookToCartIsInCartList stamp: 'd b 10/30/2019 21:52:57'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:53:29'!
test04AddingBookWithZeroQuantityReturnsError


! !

!methodRemoval: ApiCarritoTests #test03AfterAddingBookToCartIsInCartList stamp: 'd b 10/30/2019 21:53:32'!
test03AfterAddingBookToCartIsInCartList

!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:53:50' prior: 50788110!
test04AddingBookWithZeroQuantityReturnsError



! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:55:33' prior: 50788120!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response|
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = '0|OK'.
! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:56:14' prior: 50788125!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response|
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = '1|', TusLibrosApi ErrorInvalidBookQuantity.
! !
!TusLibrosApi class methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 21:56:35'!
ErrorInvalidBookQuantity
	^'La cantidad seleccionada es invalida'! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 21:56:39'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 21:56:40'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 21:56:41'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 21:56:41'!
ERROR!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 21:56:41'!
ERROR!

response!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:57:25' prior: 50788138!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response|
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 21:57:32'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 21:58:36' prior: 50788175!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response | 
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 21:58:41'!
FAILURE!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 21:58:41'!
FAILURE!
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 21:59:57' prior: 50788057!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self assertCartIdIsValid: aCartId.
	self assertQuantityIsValid: aQuantity.
	response := self request: 'addToCart' withParams: params.
	
	^response
	! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:00:05'!
ERROR!
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:00:12'!
assertQuantityIsValid: aSmallInteger 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:00:25' prior: 50788227!
assertQuantityIsValid: aQuantity 
	^aQuantity > 0.! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:00:37'!
FAILURE!

response!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:02:05' prior: 50788232!
assertQuantityIsValid: aQuantity 
	^aQuantity > 0 ifTrue: [^true] ifFalse: [^TusLibrosApi ErrorInvalidBookQuantity].! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:02:08'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:02:08'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:02:09'!
FAILURE!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:02:09'!
FAILURE!

response!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:03:35' prior: 50788241!
assertQuantityIsValid: aQuantity 
	^aQuantity > 0 ifTrue: [^true] ifFalse: [^False].! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:04:41' prior: 50788213!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self assertCartIdIsValid: aCartId.
	(self assertQuantityIsValid: aQuantity) ifFalse: ['1|', TusLibrosApi ErrorInvalidBookQuantity].
	response := self request: 'addToCart' withParams: params.
	
	^response
	! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:05:19' prior: 50788269!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self assertCartIdIsValid: aCartId.
	(self assertQuantityIsValid: aQuantity) ifFalse: [response := '1|', TusLibrosApi ErrorInvalidBookQuantity] ifTrue:[
																																response := self request: 'addToCart' withParams: params.
																																].
	^response.
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:05:21'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:05:23'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:05:23'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:05:24'!
ERROR!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:05:24'!
ERROR!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:05:45' prior: 50788263!
assertQuantityIsValid: aQuantity 
	^aQuantity > 0 ifTrue: [^true] ifFalse: [^false].! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:05:55'!
PASSED!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:07:24'!
checkCartIdIsValid: aCartId

	^true.! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:07:24' prior: 50788047!
listCart: aCartId
	| params response |
	params := Dictionary new.
	params at: 'cartId' put: aCartId.
	
	self checkCartIdIsValid: aCartId.
	
	response := self request: 'listCart' withParams: params.
	^response.
	
	! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:07:24' prior: 50788282!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self checkCartIdIsValid: aCartId.
	(self assertQuantityIsValid: aQuantity) ifFalse: [response := '1|', TusLibrosApi ErrorInvalidBookQuantity] ifTrue:[
																																response := self request: 'addToCart' withParams: params.
																																].
	^response.
	! !

!methodRemoval: TusLibrosApi #assertCartIdIsValid: stamp: 'd b 10/30/2019 22:07:24'!
assertCartIdIsValid: aCartId

	^true.!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:07:41'!
checkQuantityIsValid: aQuantity 
	^aQuantity > 0 ifTrue: [^true] ifFalse: [^false].! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:07:41' prior: 50788340!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	self checkCartIdIsValid: aCartId.
	(self checkQuantityIsValid: aQuantity) ifFalse: [response := '1|', TusLibrosApi ErrorInvalidBookQuantity] ifTrue:[
																																response := self request: 'addToCart' withParams: params.
																																].
	^response.
	! !

!methodRemoval: TusLibrosApi #assertQuantityIsValid: stamp: 'd b 10/30/2019 22:07:41'!
assertQuantityIsValid: aQuantity 
	^aQuantity > 0 ifTrue: [^true] ifFalse: [^false].!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:07:49'!
checkClientIdIsFromRegisteredClient: aClientId
	^tusLibrosStorageManager checkClientExists: aClientId.
! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:07:49' prior: 50787722!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	self checkClientIdIsFromRegisteredClient: aClientId.
	self assertClient: aClientId passwordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	response := self request: 'createCart' withParams: params.
	^response.
	! !

!methodRemoval: TusLibrosApi #assertClientIdIsFromRegisteredClient: stamp: 'd b 10/30/2019 22:07:49'!
assertClientIdIsFromRegisteredClient: aClientId
	^tusLibrosStorageManager checkClientExists: aClientId.
!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:07:59'!
checkClient: aClientId passwordIsValid: aPassword
	^tusLibrosStorageManager checkClient: aClientId passwordIsValid: aPassword.! !
!TusLibrosApi methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:07:59' prior: 50788393!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	self checkClientIdIsFromRegisteredClient: aClientId.
	self checkClient: aClientId passwordIsValid: aPassword.
	
	params add: 'clientId'->aClientId.
	params add: 'password'->aPassword.
	
	response := self request: 'createCart' withParams: params.
	^response.
	! !

!methodRemoval: TusLibrosApi #assertClient:passwordIsValid: stamp: 'd b 10/30/2019 22:07:59'!
assertClient: aClientId passwordIsValid: aPassword
	^tusLibrosStorageManager checkClient: aClientId passwordIsValid: aPassword.!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:08:04'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:08:06'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:08:07'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:08:08'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:08:09'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:11:16' prior: 50787972!
test05ListingCartItemsWithWrongCartIdReturnsError
	| cartId response api|
	
	api := TusLibrosApi new.
	cartId := '999'.
	
	response := api listCart: cartId.
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
		
	! !

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:11:23'!
FAILURE!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:11:23'!
FAILURE!

response!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:12:08' prior: 50788461!
test05ListingCartItemsWithWrongCartIdReturnsError
	| cartId response api|
	
	api := TusLibrosApi new.
	cartId := '999'.
	
	response := api addToCart: cartId bookId: '' andQuantity: 0. 
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
		
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:12:16' prior: 50788480!
test05ListingCartItemsWithWrongCartIdReturnsError
	| cartId response api|
	
	api := TusLibrosApi new.
	cartId := '999'.
	
	response := api addToCart: cartId bookId: 'A333' andQuantity: 0. 
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
		
	! !

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:12:22'!
PASSED!
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:16:09' prior: 50788325!
checkCartIdIsValid: aCartId
	^true.! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:16:30' prior: 50788508!
checkCartIdIsValid: aCartId
	^true.! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:17:05' prior: 50788513!
checkCartIdIsValid: aCartId
	^tusLibrosStorageManager checkCartExists: aCartId.! !
!TusLibrosApi methodsFor: 'assertions ' stamp: 'd b 10/30/2019 22:17:11' prior: 50788518!
checkCartIdIsValid: aCartId
	^tusLibrosStorageManager checkCartExists: aCartId.! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:17:28'!
checkCartExists: aCartId.
	! !

!classDefinition: #StorageManager category: #'25-TusLibros' stamp: 'd b 10/30/2019 22:17:46'!
Object subclass: #StorageManager
	instanceVariableNames: 'clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:17:45' prior: 50788530!
checkCartExists: aCartId.
	^carts includesKey: aCartId.! !
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/30/2019 22:18:30' prior: 50787676!
initialize
	clients := Dictionary new.
	carts := Dictionary new.
	
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:18:47'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:18:48'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:18:49'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:18:51'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:18:52'!
PASSED!
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:21:20' prior: 50788365!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [.
	(self checkQuantityIsValid: aQuantity) ifFalse: [response := '1|', TusLibrosApi ErrorInvalidBookQuantity] ifTrue:[
																																response := self request: 'addToCart' withParams: params.
																																].
												] ifFalse :[
															response := '1|', TusLibrosApi ErrorCartInvalid.
												].
	^response.
	! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:21:26' prior: 50788573!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [.
	(self checkQuantityIsValid: aQuantity) ifFalse: [response := '1|', TusLibrosApi ErrorInvalidBookQuantity] ifTrue:[
																																response := self request: 'addToCart' withParams: params.
																																].
												] ifFalse: [
															response := '1|', TusLibrosApi ErrorCartInvalid.
												].
	^response.
	! !
!TusLibrosApi class methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:21:38'!
ErrorCartInvalid
	^'El cart es invalido'! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:22:44' prior: 50788593!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [.
	(self checkQuantityIsValid: aQuantity) ifFalse: [
															response := '1|', TusLibrosApi ErrorInvalidBookQuantity]	
														 ifTrue:[
																	response := self request: 'addToCart' withParams: params.
																].
												] ifFalse: [
															response := '1|', TusLibrosApi ErrorCartInvalid.
												].
	^response.
	! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:24:07' prior: 50788422!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	(self checkClientIdIsFromRegisteredClient: aClientId) & (self checkClient: aClientId passwordIsValid: aPassword) ifTrue:[
				params add: 'clientId'->aClientId.
				params add: 'password'->aPassword.
	
				response := self request: 'createCart' withParams: params.
		] ifFalse: [
			response := '1|', TusLibrosApi ErrorClientCredentials.
		].
	

	^response.
	! !
!TusLibrosApi class methodsFor: 'errors descriptions' stamp: 'd b 10/30/2019 22:24:18'!
ErrorClientCredentials
	^'El cliente ingresado es invalido'! !
!TusLibrosApi class methodsFor: 'errors descriptions' stamp: 'd b 10/30/2019 22:24:29' prior: 50788656!
ErrorClientCredentials
	^'El cliente ingresado es invalido o no existe'! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:24:34'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:24:35'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:24:36'!
FAILURE!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:24:36'!
FAILURE!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:25:24'!
PASSED!
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 22:27:43' prior: 50788067!
request: aStringOfResource withParams: params 

	aStringOfResource = 'createCart' ifTrue: [
												
												^'0|999'. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 22:30:55' prior: 50788685!
request: aStringOfResource withParams: params 
	|cartId|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPassw').
												^'0|', cartId. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:32:28'!
addCartForClient: aClientId andPassword: aPass

! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:32:38'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:32:38'!
ERROR!
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 22:33:05' prior: 50788638!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	(self checkClientIdIsFromRegisteredClient: aClientId) & (self checkClient: aClientId passwordIsValid: aPassword) ifTrue:[
				params add: 'clientId'->aClientId.
				params add: 'clientPass'->aPassword.
	
				response := self request: 'createCart' withParams: params.
		] ifFalse: [
			response := '1|', TusLibrosApi ErrorClientCredentials.
		].
	

	^response.
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:33:08'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:33:08'!
ERROR!
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 22:33:14' prior: 50788704!
request: aStringOfResource withParams: params 
	|cartId|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPass').
												^'0|', cartId. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:33:16'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:33:16'!
ERROR!

Object subclass: #Cart
	instanceVariableNames: 'books'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 10/30/2019 22:34:39'!
Object subclass: #Cart
	instanceVariableNames: 'books'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

Object subclass: #Cart
	instanceVariableNames: 'books last_transaction'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 10/30/2019 22:36:01'!
Object subclass: #Cart
	instanceVariableNames: 'books last_transaction'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

Object subclass: #StorageManager
	instanceVariableNames: 'clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #StorageManager category: #'25-TusLibros' stamp: 'd b 10/30/2019 22:41:24'!
Object subclass: #StorageManager
	instanceVariableNames: 'clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

Object subclass: #Cart
	instanceVariableNames: 'books last_transaction clientOwner'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 10/30/2019 22:41:36'!
Object subclass: #Cart
	instanceVariableNames: 'books last_transaction clientOwner'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!Cart methodsFor: 'nil' stamp: 'd b 10/30/2019 22:42:04'!
initializeForClient: aClient! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:42:26' prior: 50788840!
initializeForClient: aClient
	clientOwner := aClient.
	last_transaction := Date now.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:42:31' prior: 50788844!
initializeForClient: aClient
	clientOwner := aClient.
	last_transaction := Date now.
	
	^self.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:44:55'!
addBook: aBookIsbn quantity: aQuantity

	(books includesKey: aBookIsbn) ifTrue: [
				books at: aBookIsbn put: (aQuantity + (books at: aBookIsbn)).
		] ifFalse:[
			books at: aBookIsbn put: aQuantity.
		].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:44:59' prior: 50788856!
addBook: aBookIsbn quantity: aQuantity

	(books includesKey: aBookIsbn) ifTrue: [
				books at: aBookIsbn put: (aQuantity + (books at: aBookIsbn)).
		] ifFalse:[
			books at: aBookIsbn put: aQuantity.
		].
	^self.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:45:13' prior: 50788850!
initializeForClient: aClient
	clientOwner := aClient.
	books := Dictionary new.
	last_transaction := Date now.
	
	^self.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:46:04'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:46:04'!
ERROR!
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:47:35' prior: 50788727!
addCartForClient: aClientId andPassword: aPass
	|newCart|
	newCart  := Cart initializeForClient: aClientId.
	
	carts add: newCart.! !
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/30/2019 22:47:43' prior: 50788547!
initialize
	clients := Dictionary new.
	carts := Array new.
	
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:47:54' prior: 50788890!
addCartForClient: aClientId andPassword: aPass
	|newCart|
	newCart  := Cart initializeForClient: aClientId.
	
	carts add: newCart.
	^self.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:10'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:10'!
ERROR!
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:48:25' prior: 50788906!
addCartForClient: aClientId andPassword: aPass
	|newCart|
	newCart  := Cart new initializeForClient: aClientId.
	
	carts add: newCart.
	^self.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:27'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:27'!
ERROR!

Date now!

Date new!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 22:48:50' prior: 50788876!
initializeForClient: aClient
	clientOwner := aClient.
	books := Dictionary new.
	"last_transaction := Date now."
	
	^self.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:58'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:48:58'!
ERROR!
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/30/2019 22:49:46' prior: 50788898!
initialize
	clients := Dictionary new.
	carts := OrExceptionHandlingCondition new.
	
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/30/2019 22:49:49' prior: 50788949!
initialize
	clients := Dictionary new.
	carts := OrderedCollection new.
	
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:49:54'!
ERROR!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:49:54'!
ERROR!
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 22:50:16' prior: 50788920!
addCartForClient: aClientId andPassword: aPass
	|newCart|
	newCart  := Cart new initializeForClient: aClientId.
	
	carts add: newCart.
	^newCart id.! !
!Cart methodsFor: 'nil' stamp: 'd b 10/30/2019 22:50:31'!
id
	^'999'! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:50:36'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:50:39'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:50:39'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:51:05'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:51:05'!
ERROR!
!StorageManager methodsFor: 'validations' stamp: 'd b 10/30/2019 22:51:54' prior: 50788542!
checkCartExists: aCart.
	^carts includes: aCart.! !
!StorageManager methodsFor: 'validations' stamp: 'd b 10/30/2019 22:52:59' prior: 50789000!
checkCartExists: aCartId.
	^carts detect: [:aCart | aCart id = aCartId ifTrue: [^true]] ifNone: [^false.].! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:53:18'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:53:18'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:53:19'!
FAILURE!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:53:19'!
FAILURE!

aCartId!

carts!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:55:57' prior: 50788004!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity api clientId response clientPassw|
	
	api := TusLibrosApi new.
	
	bookIsbn := 'A333'.
	bookQuantity := 1.
	clientId := '123'.
	clientPassw := 'passfacil'.
	response := api createCartForClient: clientId andPassword: clientPassw.
	
	cartId := response copyFrom: 3 to: (response size). "esto es para sacar el id del carrito"
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = '0|OK'.! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 22:56:19'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:56:21'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:56:21'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:56:24'!
FAILURE!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:56:24'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:57:17' prior: 50788192!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response clientId clientPassw | 
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	clientId := '123'.
	clientPassw := 'passfacil'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 22:57:25'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:57:26'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:57:27'!
FAILURE!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:57:27'!
FAILURE!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 22:58:19'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:58:34' prior: 50789063!
test04AddingBookWithZeroQuantityReturnsError

	| cartId bookIsbn bookQuantity api response clientId clientPassw | 
	
	api := TusLibrosApi new.
	cartId := '999'.
	bookIsbn := 'A333'.
	bookQuantity := 0.
	clientId := '123'.
	clientPassw := 'passfacil'.
	response := api createCartForClient: clientId andPassword: clientPassw.
	cartId := response copyFrom: 3 to: (response size). "esto es para sacar el id del carrito"
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
! !

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 22:58:35'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:58:50'!
FAILURE!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 22:58:50'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 22:59:10' prior: 50788492!
test05ListingCartItemsWithWrongCartIdReturnsError
	| cartId response api clientId clientPassw |
	
	api := TusLibrosApi new.
	
	clientId := '123'.
	clientPassw := 'passfacil'.
	response := api createCartForClient: clientId andPassword: clientPassw.
	cartId := response copyFrom: 3 to: (response size). "esto es para sacar el id del carrito"
	
	response := api addToCart: cartId bookId: 'A333' andQuantity: 0. 
	
	self assert: response = ('1|', TusLibrosApi ErrorInvalidBookQuantity).
		
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:00:19' prior: 50789129!
test05ListingCartItemsWithWrongCartIdReturnsError
	| response api clientId clientPassw |
	
	api := TusLibrosApi new.
	
	clientId := '123'.
	clientPassw := 'passfacil'.
	response := api listCart: '2232'.
	
	
	self assert: response = ('1|', TusLibrosApi ErrorCartInvalid ).
		
	! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:00:36' prior: 50789148!
test05ListingCartItemsWithWrongCartIdReturnsError
	| response api  |
	
	api := TusLibrosApi new.
	
	response := api listCart: '2232'.
	
	
	self assert: response = ('1|', TusLibrosApi ErrorCartInvalid ).
		
	! !

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 23:00:37'!
FAILURE!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 23:00:37'!
FAILURE!
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 23:01:53' prior: 50788330!
listCart: aCartId
	| params response |
	params := Dictionary new.
	params at: 'cartId' put: aCartId.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [
			response := self request: 'listCart' withParams: params.	
		] ifFalse: [response := '1|', TusLibrosApi ErrorCartInvalid ].
	
	
	^response.
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 23:01:55'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 23:01:55'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 23:01:55'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 23:01:55'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 23:01:55'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:03:05'!
test06CreatingCartWithInvalidClientReturnsError
	| response api  |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: 'asdasd' andPassword: 'asdad'.
	
	self assert: response = ('1|', TusLibrosApi ErrorClientCredentials ).
		
	! !

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:03:06'!
ERROR!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:03:06'!
ERROR!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:03:18'!
ERROR!
!StorageManager methodsFor: 'validations' stamp: 'd b 10/30/2019 23:04:56' prior: 50787692!
checkClient: aClientId passwordIsValid: aPassw
	^(clients at: aClientId ifAbsent:[^false]) = aPassw .! !
!StorageManager methodsFor: 'validations' stamp: 'd b 10/30/2019 23:05:37' prior: 50789229!
checkClient: aClientId passwordIsValid: aPassw
	^(clients at: aClientId) = aPassw .! !
!TusLibrosApi class methodsFor: 'errors descriptions' stamp: 'd b 10/30/2019 23:05:55' prior: 50788662!
ErrorClientCredentials
	^'El cliente ingresado es invalido'! !
!TusLibrosApi class methodsFor: 'errors descriptions' stamp: 'd b 10/30/2019 23:06:04'!
ErrorClientNotExists
	^'El cliente ingresado no existe'! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 23:07:29' prior: 50788739!
createCartForClient: aClientId andPassword: aPassword
	| params response|
	params := Dictionary new.
	(self checkClientIdIsFromRegisteredClient: aClientId) ifTrue:[
		(self checkClient: aClientId passwordIsValid: aPassword) ifTrue:[
				params add: 'clientId'->aClientId.
				params add: 'clientPass'->aPassword.
	
				response := self request: 'createCart' withParams: params.
																		] ifFalse:[
																			response := '1|', TusLibrosApi ErrorClientCredentials .
																		].
																] ifFalse: [
			response := '1|', TusLibrosApi ErrorClientNotExists .
		].
	

	^response.
	! !

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/30/2019 23:07:32'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/30/2019 23:07:33'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/30/2019 23:07:34'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/30/2019 23:07:34'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/30/2019 23:07:35'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:07:36'!
FAILURE!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:07:36'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:07:51' prior: 50789207!
test06CreatingCartWithInvalidClientReturnsError
	| response api  |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: 'asdasd' andPassword: 'asdad'.
	
	self assert: response = ('1|', TusLibrosApi ErrorClientNotExists ).
		
	! !

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/30/2019 23:07:53'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:40:08'!
test07AfterAddingBookToCartIsNotEmpty
	| response api  |
	
	api := TusLibrosApi new.
	
! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:42:00' prior: 50789314!
test07AfterAddingBookToCartIsNotEmpty
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A3322'.
	
	api addToCart: cartId bookId: bookIsbn andQuantity: 1.! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:42:35' prior: 50789320!
test07AfterAddingBookToCartIsNotEmpty
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A3322'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response = '0|A3322|1'.! !

Object subclass: #StorageManager
	instanceVariableNames: 'books clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #StorageManager category: #'25-TusLibros' stamp: 'd b 10/30/2019 23:42:58'!
Object subclass: #StorageManager
	instanceVariableNames: 'books clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/30/2019 23:43:11' prior: 50788958!
initialize
	clients := Dictionary new.
	carts := OrderedCollection new.
	books := OrderedCollection new.
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:43:16'!
FAILURE!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:43:16'!
FAILURE!

response!

cartId!
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 23:45:57' prior: 50788764!
request: aStringOfResource withParams: params 
	|cartId|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPass').
												^'0|', cartId. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												tusLibrosStorageManager addBook: (params at: 'bookIsbn') ToCart: (params at: 'cartId') quantity: (params  at:'quantity').
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/30/2019 23:47:01' prior: 50788618!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [.
	(self checkQuantityIsValid: aQuantity) ifFalse: [
															response := '1|', TusLibrosApi ErrorInvalidBookQuantity]	
														 ifTrue:[
															
																	params at: 'bookIsbn' put: aBookIsbn.
																	params at: 'quantity' put: aQuantity.
																	params at: 'cartId' put: aCartId.
																	response := self request: 'addToCart' withParams: params.
																].
												] ifFalse: [
															response := '1|', TusLibrosApi ErrorCartInvalid.
												].
	^response.
	! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:47:07'!
ERROR!
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 23:47:16'!
addBook: aString ToCart: aString2 quantity: aSmallInteger 
	self shouldBeImplemented.! !
!StorageManager methodsFor: 'xxx' stamp: 'd b 10/30/2019 23:51:24' prior: 50789432!
addBook: bookIsbn ToCart: cartId quantity: quantity 
	|cart|
	cart := carts detect: [:aCart | aCart id = cartId] ifNone: ["verificar aca o en api?"].
	cart addBook: bookIsbn quantity: quantity.
	
	! !

response!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:52:07' prior: 50789333!
test07AfterAddingBookToCartIsNotEmpty
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A3322'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response = '0|OK'.! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/30/2019 23:53:02' prior: 50789448!
test07AfterAddingBookToCartIsNotEmpty
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A3322'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response = '0|OK'.
	
	response := api listCart: cartId.
	
	self assert: response = '0|A3322|1'.! !

response!
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 23:54:25' prior: 50789377!
request: aStringOfResource withParams: params 
	|cartId listDescriptionOfCart|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPass').
												^'0|', cartId. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												listDescriptionOfCart := tusLibrosStorageManager listOfCart: (params at: 'cartId').
												^'0|'.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												tusLibrosStorageManager addBook: (params at: 'bookIsbn') ToCart: (params at: 'cartId') quantity: (params  at:'quantity').
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/30/2019 23:54:38' prior: 50789479!
request: aStringOfResource withParams: params 
	|cartId listDescriptionOfCart|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPass').
												^'0|', cartId. "devuelvo 0 por codigo OK y  999 que es el num de carrito hardcoded"
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												listDescriptionOfCart := tusLibrosStorageManager listOfCart: (params at: 'cartId').
												^'0|', listDescriptionOfCart.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												tusLibrosStorageManager addBook: (params at: 'bookIsbn') ToCart: (params at: 'cartId') quantity: (params  at:'quantity').
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:54:51'!
listOfCart: aString 
	self shouldBeImplemented.! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:56:34' prior: 50789542!
listOfCart: aCartId
	|cart|
	cart := carts detect: [:c | c id = aCartId].
	
	^(cart listOfBooksAndQuantity)
	
	! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:56:38'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:56:46'!
listOfBooksAndQuantity
	self shouldBeImplemented.! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:57:04' prior: 50789557!
listOfBooksAndQuantity
	^books select:[:aBook | aBook].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:58:35' prior: 50789562!
listOfBooksAndQuantity
	^books select:[:aBook | aBook , '|' , books at: aBook].! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:58:38'!
ERROR!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/30/2019 23:58:54' prior: 50789547!
listOfCart: aCartId
	|cart|
	cart := carts detect: [:c | c id = aCartId].
	
	^'|', (cart listOfBooksAndQuantity)
	
	! !

cart!

cart!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/30/2019 23:59:15'!
ERROR!

aBook!

books!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:00:35' prior: 50789567!
listOfBooksAndQuantity
	^books keysDo: [:aBook | aBook , '|' , books at: aBook].! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:00:50'!
ERROR!

aBook!

books at: aBook!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:01:26' prior: 50789588!
listOfBooksAndQuantity
	^books keysDo: [:aBook | aBook , '|' , (books at: aBook asString)].! !

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:01:28'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:01:49' prior: 50789598!
listOfBooksAndQuantity
	^books keysDo: [:aBook | aBook , '|' , ((books at: aBook) asString)].! !

(cart listOfBooksAndQuantity)!

(cart listOfBooksAndQuantity)!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:02:30' prior: 50789608!
listOfBooksAndQuantity
	|desc|
	^books keysDo: [:aBook | desc := aBook , '|' , ((books at: aBook) asString)].! !
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:02:40' prior: 50789616!
listOfBooksAndQuantity
	|desc|
	books keysDo: [:aBook | desc := aBook , '|' , ((books at: aBook) asString)].
	^desc.! !

(cart listOfBooksAndQuantity)!

'0|', listDescriptionOfCart!

listDescriptionOfCart!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:03:26' prior: 50789577!
listOfCart: aCartId
	|cart|
	cart := carts detect: [:c | c id = aCartId].
	
	^(cart listOfBooksAndQuantity)
	
	! !

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:41'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:03:41'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:41'!
ERROR!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:03:44'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:03:45'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:03:47'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:48'!
ERROR!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:03:48'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:48'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:57'!
ERROR!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:03:57'!
ERROR!
!Cart methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:04:55' prior: 50789623!
listOfBooksAndQuantity
	|desc|
	desc := ''.
	books keysDo: [:aBook | desc := aBook , '|' , ((books at: aBook) asString)].
	^desc.! !

request!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:05:15'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:05:29'!
PASSED!
!TusLibrosApi methodsFor: 'methods |' stamp: 'd b 10/31/2019 00:07:43' prior: 50789510!
request: aStringOfResource withParams: params 
	|cartId listDescriptionOfCart|
	aStringOfResource = 'createCart' ifTrue: [
												cartId := tusLibrosStorageManager addCartForClient: (params at: 'clientId') andPassword: (params at: 'clientPass').
												^'0|', cartId. 
											].	
	aStringOfResource = 'listCart' ifTrue:  [
												listDescriptionOfCart := tusLibrosStorageManager listOfCart: (params at: 'cartId').
												^'0|', listDescriptionOfCart.
											].
										
	aStringOfResource = 'addToCart' ifTrue: [
												tusLibrosStorageManager addBook: (params at: 'bookIsbn') ToCart: (params at: 'cartId') quantity: (params  at:'quantity').
												^'0|OK'.
											].														
										
																				
										
	^self error: TusLibrosApi ErrorResourceNotFound.
										
										! !

Date new!

Date initialize!

Date initialize now!

(Date initialize) now!

FixedGregorianDate!

FixedGregorianDate!

FixedGregorianDate today!

GregorianDateTime now!
!Cart methodsFor: 'initialization' stamp: 'd b 10/31/2019 00:11:52' prior: 50788935!
initializeForClient: aClient
	clientOwner := aClient.
	books := Dictionary new.
	last_transaction := GregorianDateTime.	
	^self.! !
!Cart methodsFor: 'initialization' stamp: 'd b 10/31/2019 00:11:56' prior: 50789762!
initializeForClient: aClient
	clientOwner := aClient.
	books := Dictionary new.
	last_transaction := GregorianDateTime now.	
	^self.! !
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/31/2019 00:13:01' prior: 50789360!
initialize
	clients := Dictionary new.
	carts := OrderedCollection new.
	books := OrderedCollection new.
	books add: 'A322'.
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !
!StorageManager methodsFor: 'initialization' stamp: 'd b 10/31/2019 00:13:10' prior: 50789777!
initialize
	clients := Dictionary new.
	carts := OrderedCollection new.
	books := OrderedCollection new.
	books add: 'A3322'.
	"""TODO: temporal para probar"""
	clients at: '123' put:'passfacil'.
	^self! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:14:59'!
test08AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response = '1|' , TusLibrosApi ErrorBookInvalid.! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:15:01'!
ERROR!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:15:01'!
ERROR!
!TusLibrosApi class methodsFor: 'auto complete' stamp: 'd b 10/31/2019 00:15:21'!
ErrorBookInvalid
	self shouldBeImplemented.! !
!TusLibrosApi class methodsFor: 'auto complete' stamp: 'd b 10/31/2019 00:15:31' prior: 50789819!
ErrorBookInvalid
	^'El libro no pertenece a la editorial'.! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:15:37'!
ERROR!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:15:44'!
ERROR!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:16:03'!
ERROR!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:16:03'!
ERROR!

TusLibrosApi ErrorBookInvalid!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:16:26' prior: 50789796!
test08AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response =( '1|' , TusLibrosApi ErrorBookInvalid).! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:16:32'!
FAILURE!

response !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:16:58'!
FAILURE!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:16:58'!
FAILURE!
!TusLibrosApi methodsFor: 'resources' stamp: 'd b 10/31/2019 00:22:05' prior: 50789404!
addToCart: aCartId bookId: aBookIsbn andQuantity: aQuantity 
	| params response |
	
	params := Dictionary new.
	
	(self checkCartIdIsValid: aCartId) ifTrue: [
		
										(self checkQuantityIsValid: aQuantity) ifFalse: [
																						response := '1|', TusLibrosApi ErrorInvalidBookQuantity.
																						^response.
																					].
										
										(self checkBookIsFromEditorial: aBookIsbn) ifFalse: [
																									response := '1|', TusLibrosApi ErrorBookInvalid. 			
																									]	
														 ifTrue:[
															
																	params at: 'bookIsbn' put: aBookIsbn.
																	params at: 'quantity' put: aQuantity.
																	params at: 'cartId' put: aCartId.
																	response := self request: 'addToCart' withParams: params.
																].
												] ifFalse: [
															response := '1|', TusLibrosApi ErrorCartInvalid.
												].
											
	^response.
	! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:22:16'!
ERROR!
!TusLibrosApi methodsFor: 'associating' stamp: 'd b 10/31/2019 00:22:19'!
checkBookIsFromEditorial: aString 
	self shouldBeImplemented.! !
!TusLibrosApi methodsFor: 'associating' stamp: 'd b 10/31/2019 00:22:35' prior: 50789910!
checkBookIsFromEditorial: aBookIsbn 
! !
!TusLibrosApi methodsFor: 'associating' stamp: 'd b 10/31/2019 00:23:01' prior: 50789915!
checkBookIsFromEditorial: aBookIsbn 
	 ^tusLibrosStorageManager checkBookExists: aBookIsbn.! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:23:03'!
ERROR!
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:23:10'!
checkBookExists: aString 
	self shouldBeImplemented.! !
!StorageManager methodsFor: 'as yet unclassified' stamp: 'd b 10/31/2019 00:23:37' prior: 50789930!
checkBookExists: aBookIsbn
	^books includes: aBookIsbn.! !

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:23:57'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:24:56'!
test08AddingInvalidBookToCartNotAffectTheStateOfTheCart
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	response := api listCart: cartId.
	
	self assert: response = '0|'.! !
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:25:03'!
test09AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response =( '1|' , TusLibrosApi ErrorBookInvalid).! !

!methodRemoval: ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:25:03'!
test08AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response =( '1|' , TusLibrosApi ErrorBookInvalid).!

!testRun: #ApiCarritoTests #test09AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:25:03'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:06'!
FAILURE!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test08AddingInvalidBookToCartNotAffectTheStateOfTheCart stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test09AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:25:06'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:06'!
FAILURE!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:13'!
FAILURE!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:13'!
FAILURE!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:25:47' prior: 50789026!
test03AddingBookToCartNeedsQuantityGreaterThanZero
	| cartId bookIsbn bookQuantity api clientId response clientPassw|
	
	api := TusLibrosApi new.
	
	bookIsbn := 'A3322'.
	bookQuantity := 1.
	clientId := '123'.
	clientPassw := 'passfacil'.
	response := api createCartForClient: clientId andPassword: clientPassw.
	
	cartId := response copyFrom: 3 to: (response size). "esto es para sacar el id del carrito"
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: bookQuantity.
	
	self assert: response = '0|OK'.! !

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:50'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:25:52'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:25:53'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/31/2019 00:25:54'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:25:55'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:25:56'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:25:56'!
PASSED!

!testRun: #ApiCarritoTests #test01AfterCreateCartResponseCodeIs0 stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test02AfterCreateCartIsEmpty stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test03AddingBookToCartNeedsQuantityGreaterThanZero stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test04AddingBookWithZeroQuantityReturnsError stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test05ListingCartItemsWithWrongCartIdReturnsError stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test06CreatingCartWithInvalidClientReturnsError stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test07AfterAddingBookToCartIsNotEmpty stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test08AddingInvalidBookToCartNotAffectTheStateOfTheCart stamp: 'd b 10/31/2019 00:25:58'!
PASSED!

!testRun: #ApiCarritoTests #test09AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:25:58'!
PASSED!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:26:28'!
test08AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response =( '1|' , TusLibrosApi ErrorBookInvalid).! !

!methodRemoval: ApiCarritoTests #test09AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:26:28'!
test09AddingToCartABookFailsWhenIsNotFromEditorial
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	self assert: response =( '1|' , TusLibrosApi ErrorBookInvalid).!
!ApiCarritoTests methodsFor: 'tests' stamp: 'd b 10/31/2019 00:26:34'!
test09AddingInvalidBookToCartNotAffectTheStateOfTheCart
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	response := api listCart: cartId.
	
	self assert: response = '0|'.! !

!methodRemoval: ApiCarritoTests #test08AddingInvalidBookToCartNotAffectTheStateOfTheCart stamp: 'd b 10/31/2019 00:26:34'!
test08AddingInvalidBookToCartNotAffectTheStateOfTheCart
	| cartId response api bookIsbn |
	
	api := TusLibrosApi new.
	
	response := api createCartForClient: '123' andPassword: 'passfacil'.
	
	cartId := response copyFrom: 3 to: (response size).
	
	bookIsbn := 'A33222'.
	
	response := api addToCart: cartId bookId: bookIsbn andQuantity: 1.
	
	response := api listCart: cartId.
	
	self assert: response = '0|'.!

!testRun: #ApiCarritoTests #test08AddingToCartABookFailsWhenIsNotFromEditorial stamp: 'd b 10/31/2019 00:26:44'!
PASSED!

----QUIT----(31 October 2019 00:28:11) CuisUniversity-3938.image priorSource: 14482674!

----STARTUP---- (2 November 2019 20:42:12) as /home/diego/linux64/CuisUniversity-3938.image!


!classRemoval: #TusLibrosApi stamp: 'd b 11/2/2019 20:42:37'!
Object subclass: #TusLibrosApi
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #StorageManager stamp: 'd b 11/2/2019 20:42:37'!
Object subclass: #StorageManager
	instanceVariableNames: 'books clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #Cart stamp: 'd b 11/2/2019 20:42:37'!
Object subclass: #Cart
	instanceVariableNames: 'books last_transaction clientOwner'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #ApiCarritoTests stamp: 'd b 11/2/2019 20:42:38'!
TestCase subclass: #ApiCarritoTests
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

Object subclass: #Cart
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 20:42:59'!
Object subclass: #Cart
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #CartTest category: #'25-TusLibros' stamp: 'd b 11/2/2019 20:43:09'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:44:00'!
test01NewCartIsEmpty

	| cart |
	cart := Cart new.! !
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:44:10' prior: 50790237!
test01NewCartIsEmpty

	| cart |
	cart := Cart new.
	
	self assert: cart isEmpty.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 20:44:12'!
ERROR!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 20:44:12'!
ERROR!
!Cart methodsFor: 'accessing' stamp: 'd b 11/2/2019 20:44:22'!
isEmpty
	self shouldBeImplemented.! !
!Cart methodsFor: 'accessing' stamp: 'd b 11/2/2019 20:44:42' prior: 50790252!
isEmpty
	^true.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 20:45:09'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:46:39'!
test02AfterAddABookCartIsNotEmpty

	| cart |
	cart := Cart new.
	
	self assert: (cart isEmpty) = false.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:46:40'!
FAILURE!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:46:40'!
FAILURE!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:46:58' prior: 50790262!
test02AfterAddABookCartIsNotEmpty

	| cart |
	cart := Cart new.
	cart addBook: 'AD3322'.	
	self assert: (cart isEmpty) = false.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:47:01'!
ERROR!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:47:01'!
ERROR!
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 20:47:45'!
addBook: aString 
	self shouldBeImplemented.! !

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 20:48:22'!
Object subclass: #Cart
	instanceVariableNames: 'books'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 20:48:20' prior: 50790287!
addBook: aBookISBN
	books add: aBookISBN.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:48:28'!
ERROR!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:48:34'!
ERROR!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:48:48'!
ERROR!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:48:48'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:49:05' prior: 50790274!
test02AfterAddABookCartIsNotEmpty

	| cart |
	cart := Cart initialize.
	cart addBook: 'AD3322'.	
	self assert: (cart isEmpty) = false.! !
!Cart class methodsFor: 'nil' stamp: 'd b 11/2/2019 20:49:25'!
initialize
	^self new initialize.! !
!Cart methodsFor: 'nil' stamp: 'd b 11/2/2019 20:49:49'!
initialize

	books := OrderedCollection new.
	
	^self.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:50:00'!
FAILURE!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:50:00'!
FAILURE!
!Cart methodsFor: 'accessing' stamp: 'd b 11/2/2019 20:50:32' prior: 50790256!
isEmpty
	^books size = 0.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:50:35'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:51:05' prior: 50790314!
test02AfterAddABookCartIsNotEmpty

	| cart |
	cart := Cart initialize.
	cart addBook: 'AD3322' quantity: 1.
	self assert: (cart isEmpty) = false.! !
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 20:51:14'!
addBook: aBookISBN quantity: aQuantit.
	books add: aBookISBN.! !
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 20:51:15' prior: 50790349!
addBook: aBookISBN quantity: aQuantity.
	books add: aBookISBN.! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:52:10'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:53:22'!
test03AddingZeroBooksIsInvalid

	| cart |
	cart := Cart initialize.
	self should: [cart addBook: 'AD3322' quantity: 0]
		raise: Error
			withMessageText: Cart ErrorBookQuantityInvalid.! !

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:53:30'!
ERROR!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:53:30'!
ERROR!
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 20:53:40'!
ErrorBookQuantityInvalid
	self shouldBeImplemented.! !
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 20:53:52' prior: 50790376!
ErrorBookQuantityInvalid
	^'La cantidad de libros es invalida'! !

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:54:02'!
FAILURE!

!methodRemoval: Cart #addBook: stamp: 'd b 11/2/2019 20:54:26'!
addBook: aBookISBN
	books add: aBookISBN.!
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 20:55:04' prior: 50790354!
addBook: aBookISBN quantity: aQuantity.
	self assertbookQuantityIsValid: aQuantity.
	books add: aBookISBN.! !

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:55:12'!
FAILURE!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:55:12'!
FAILURE!
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 20:55:50'!
assertbookQuantityIsValid: aQuantity

	^aQuantity > 0.
! !

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:55:53'!
FAILURE!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:55:53'!
FAILURE!
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 20:57:02' prior: 50790404!
assertbookQuantityIsValid: aQuantity

	aQuantity > 0 ifFalse: [^self error: Cart ErrorBookQuantityInvalid ].
! !

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 20:57:05'!
PASSED!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 20:57:06'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:57:28'!
test04AddingNegativeBooksIsInvalid

	| cart |
	cart := Cart initialize.
	self should: [cart addBook: 'AD3322' quantity: -1]
		raise: Error
			withMessageText: Cart ErrorBookQuantityInvalid.! !

!testRun: #CartTest #test04AddingNegativeBooksIsInvalid stamp: 'd b 11/2/2019 20:57:29'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 20:58:05'!
test05AddingNonIntegerBooksIsInvalid

	| cart |
	cart := Cart initialize.
	self should: [cart addBook: 'AD3322' quantity: 1/2]
		raise: Error
			withMessageText: Cart ErrorBookQuantityInvalid.! !

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 20:58:07'!
FAILURE!

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 20:58:07'!
FAILURE!
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 20:58:51' prior: 50790415!
assertbookQuantityIsValid: aQuantity

	aQuantity > 0 ifFalse: [^self error: Cart ErrorBookQuantityInvalid ].
	aQuantity class = SmallInteger ifFalse: [^self error: Cart ErrorBookQuantityInvalid ].
! !

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 20:58:54'!
PASSED!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 21:01:06'!
test06AddingABookThatNotBelongsToEditorialIsInvalid

	| cart books |
	books := OrderedCollection new.
	books add: 'AD3332'.
	
	cart := Cart initializeWithBookList: books.
	self should: [cart addBook: 'AD3322' quantity: 1]
		raise: Error
			withMessageText: Cart ErrorBookNotExists.! !

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:01:11'!
ERROR!

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:01:11'!
ERROR!

!classDefinition: 'Cart class' category: #'25-TusLibros' stamp: 'd b 11/2/2019 21:01:17'!
Cart class
	instanceVariableNames: 'books_CHANGE_ME'!
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:01:17'!
initializeWithBookList: books 
	self shouldBeImplemented.
	books_CHANGE_ME := books.! !
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:01:46' prior: 50790490!
initializeWithBookList: books 
	^self new initializeWithBookList: books.! !

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 21:02:04'!
Object subclass: #Cart
	instanceVariableNames: 'books books_CHANGE_ME'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:02:24' prior: 50790496!
initializeWithBookList: aBookList 
	^self new initializeWithBookList: aBookList.! !

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 21:02:34'!
Object subclass: #Cart
	instanceVariableNames: 'books books_CHANGE_ME bookList'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 21:02:34'!
initializeWithBookList: aBookList 
	self shouldBeImplemented.
	bookList := aBookList.! !
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 21:03:36' prior: 50790522!
initializeWithBookList: aBookList 
	bookList := aBookList.
	^self initialize.! !

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:03:43'!
ERROR!
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:03:49'!
ErrorBookNotExists
	self shouldBeImplemented.! !
!Cart class methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:03:56' prior: 50790537!
ErrorBookNotExists
	^'El libro no existe'.! !

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:04:02'!
FAILURE!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 21:04:55'!
Object subclass: #Cart
	instanceVariableNames: 'books books_CHANGE_ME bookList booksAdded'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 21:04:54' prior: 50790324!
initialize

	booksAdded := OrderedCollection new.
	
	^self.! !
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 21:05:06' prior: 50790392!
addBook: aBookISBN quantity: aQuantity.
	self assertbookQuantityIsValid: aQuantity.
	booksAdded add: aBookISBN.! !
!Cart methodsFor: 'accessing' stamp: 'd b 11/2/2019 21:05:16' prior: 50790335!
isEmpty
	^booksAdded size = 0.! !
!Cart methodsFor: 'initialization' stamp: 'd b 11/2/2019 21:05:48' prior: 50790528!
initializeWithBookList: aBookList 
	bookList := aBookList.
	^self initialize.! !

Object subclass: #Cart
	instanceVariableNames: 'bookList booksAdded'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classDefinition: #Cart category: #'25-TusLibros' stamp: 'd b 11/2/2019 21:05:55'!
Object subclass: #Cart
	instanceVariableNames: 'bookList booksAdded'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 21:05:59'!
PASSED!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 21:06:01'!
PASSED!

!testRun: #CartTest #test04AddingNegativeBooksIsInvalid stamp: 'd b 11/2/2019 21:06:28'!
PASSED!

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 21:06:29'!
PASSED!

!testRun: #CartTest #test04AddingNegativeBooksIsInvalid stamp: 'd b 11/2/2019 21:06:30'!
PASSED!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 21:06:31'!
PASSED!

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:06:33'!
FAILURE!

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:06:33'!
FAILURE!

cart !

cart !

cart isEmpty !

cart!
!Cart methodsFor: 'associating' stamp: 'd b 11/2/2019 21:08:36' prior: 50790563!
addBook: aBookISBN quantity: aQuantity.
	self assertbookQuantityIsValid: aQuantity.
	self assertBookIsAvailable: aBookISBN.
	booksAdded add: aBookISBN.! !
!Cart methodsFor: 'assertions' stamp: 'd b 11/2/2019 21:09:18'!
assertBookIsAvailable: aBookISBN

	(bookList includes: aBookISBN) ifFalse: [^self error: Cart ErrorBookNotExists ].
! !

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:09:23'!
PASSED!

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 21:09:24'!
PASSED!

!testRun: #CartTest #test04AddingNegativeBooksIsInvalid stamp: 'd b 11/2/2019 21:09:27'!
PASSED!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 21:09:29'!
PASSED!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 21:09:33'!
ERROR!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 21:09:33'!
ERROR!
!CartTest methodsFor: 'tests' stamp: 'd b 11/2/2019 21:10:01' prior: 50790342!
test02AfterAddABookCartIsNotEmpty

	| cart books |
	books :=OrderedCollection new.
	books add: 'AD3322'.
	cart := Cart initializeWithBookList: books.
	cart addBook: 'AD3322' quantity: 1.
	self assert: (cart isEmpty) = false.! !

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 21:10:13'!
PASSED!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 21:10:14'!
PASSED!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 21:10:15'!
PASSED!

----End fileIn of /home/diego/Documents/Facultad/INGSoft1/25-TusLibros/TusLibros-18.st----!

!testRun: #CartTest #test01NewCartIsEmpty stamp: 'd b 11/2/2019 21:13:13'!
ERROR!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test02AfterAddABookCartIsNotEmpty stamp: 'd b 11/2/2019 21:13:13'!
ERROR!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test03AddingZeroBooksIsInvalid stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test04AddingNegativeBooksIsInvalid stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test05AddingNonIntegerBooksIsInvalid stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test06AddingABookThatNotBelongsToEditorialIsInvalid stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/2/2019 21:13:13'!
PASSED!

!classRemoval: #Cart stamp: 'd b 11/2/2019 21:20:46'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'd b 11/2/2019 21:20:47'!
TestCase subclass: #CartTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /home/diego/Documents/Facultad/INGSoft1/25-TusLibros/TusLibros-18.st----!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/2/2019 21:21:27'!
PASSED!

Object subclass: #Cajero
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/2/2019 22:52:59'!
Object subclass: #Cajero
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #CajeroTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CajeroTest category: #TusLibros stamp: 'd b 11/2/2019 22:55:32'!
TestCase subclass: #CajeroTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #Cajero
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/2/2019 22:55:38'!
Object subclass: #Cajero
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CajeroTest methodsFor: 'nil' stamp: 'd b 11/2/2019 23:04:14'!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := Dictionary.
	cajero := Cajero initializeWithPriceList: priceList.! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:04:25' prior: 50791150!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := Dictionary.
	cajero := Cajero new initializeWithPriceList: priceList.! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:05:18' prior: 50791158!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := Dictionary.
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:05:29' prior: 50791166!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := Dictionary.
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:05:43'!
ERROR!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:05:43'!
ERROR!
!Cajero class methodsFor: 'associating' stamp: 'd b 11/2/2019 23:05:51'!
ErrorPriceListNeeded
	self shouldBeImplemented.! !
!Cajero class methodsFor: 'associating' stamp: 'd b 11/2/2019 23:06:02' prior: 50791193!
ErrorPriceListNeeded
	^'Es necesario una lista de precios no vacia'! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:06:09'!
FAILURE!

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/2/2019 23:07:00'!
Object subclass: #Cajero
	instanceVariableNames: 'priceList'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cajero methodsFor: 'nil' stamp: 'd b 11/2/2019 23:06:59'!
initializeWithPriceList: aPriceList

	priceList := aPriceList.
	^self.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:07:39' prior: 50791177!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := self createPriceList.
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				! !
!CajeroTest methodsFor: 'nil' stamp: 'd b 11/2/2019 23:08:01'!
createPriceList
	|priceList|
	priceList := Dictionary new.
	
	^priceList .! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:08:38' prior: 50791227!
createPriceList
	|priceList|
	priceList := Dictionary new.
	priceList add: #a->4; add: #b->3; add: #c->1; add: #d->2; yourself.
	^priceList .! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:08:59' prior: 50791233!
createPriceList
	|priceList books|
	books := self createListOfBooks.
	priceList := Dictionary new.
	priceList add: #a->4; add: #b->3; add: #c->1; add: #d->2; yourself.
	^priceList .! !

(1 to: 5) atRandom!
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:10:53' prior: 50791241!
createPriceList
	|priceList books|
	books := self createListOfBooks.
	priceList := Dictionary new.
	books do: [:aBook | priceList add: aBook->((1 to: 500) atRandom)].
	^priceList .! !
!CajeroTest methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:11:48'!
createListOfBooks
	
	^#('A3322', 'A111', 'A4222', 'A3123')! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:12:01'!
FAILURE!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:12:01'!
FAILURE!

books!

books at:1!

priceList!
!CajeroTest methodsFor: 'aux' stamp: 'd b 11/2/2019 23:14:54' prior: 50791251!
createPriceList
	|priceList books|
	books := self createListOfBooks.
	priceList := Dictionary new.
	('A3322', 'A111', 'A4222', 'A3123')
	x add: 'A3322'->1010; add: 'A111'->300; add: 'A4222'->720; add: 'A3123'->900; yourself.
	^priceList .! !
!CajeroTest methodsFor: 'aux' stamp: 'd b 11/2/2019 23:15:11' prior: 50791272!
createPriceList
	|priceList |
	priceList := Dictionary new.
	('A3322', 'A111', 'A4222', 'A3123')
	x add: 'A3322'->1010; add: 'A111'->300; add: 'A4222'->720; add: 'A3123'->900; yourself.
	^priceList .! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:15:18'!
ERROR!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:15:18'!
ERROR!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:15:25'!
ERROR!
!CajeroTest methodsFor: 'aux' stamp: 'd b 11/2/2019 23:15:42' prior: 50791283!
createPriceList
	|priceList |
	priceList := Dictionary new.
	priceList add: 'A3322'->1010; add: 'A111'->300; add: 'A4222'->720; add: 'A3123'->900; yourself.
	^priceList .! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:15:46'!
FAILURE!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:15:46'!
FAILURE!
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:16:21' prior: 50791212!
initializeWithPriceList: aPriceList
	aPriceList isEmpty ifTrue: [^self error: Cajero ErrorPriceListNeeded ].
	priceList := aPriceList.
	^self.! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:16:24'!
FAILURE!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:16:24'!
FAILURE!

cajero := Cajero new initializeWithPriceList: priceList.!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:17:25' prior: 50791217!
test01CajeroNeedsANonEmptyPriceList

	| cajero priceList |
	
	priceList := Dictionary new..
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				! !

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:17:28'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:17:58'!
test02CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := Dictionary new..
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:20:29'!
test03CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero
				! !

!methodRemoval: CajeroTest #test02CheckoutCajeroWithOneBookReturnsThePriceOfIt stamp: 'd b 11/2/2019 23:20:33'!
test02CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := Dictionary new..
	self 
		should: [cajero := Cajero new initializeWithPriceList: priceList.]
			raise: Error
				withMessageText: Cajero ErrorPriceListNeeded.
				!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:21:28'!
test02CajeroNeedsAtLeastOneBookToCheckout

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self 
		should: [cajero checkout]
			raise: Error
				withMessageText: Cajero ErrorCheckoutNeedsABook.
				! !

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:21:34'!
ERROR!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:21:34'!
ERROR!
!Cajero class methodsFor: '*LiveTyping' stamp: 'd b 11/2/2019 23:21:41'!
ErrorCheckoutNeedsABook
	self shouldBeImplemented.! !
!Cajero class methodsFor: '*LiveTyping' stamp: 'd b 11/2/2019 23:21:54' prior: 50791395!
ErrorCheckoutNeedsABook
	^'No se puede checkoutear un cajero si no hay libros para pagar'! !

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:22:04'!
FAILURE!
!Cajero methodsFor: 'nil' stamp: 'd b 11/2/2019 23:22:23'!
checkout
! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:22:42'!
test05CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero
				! !

!methodRemoval: CajeroTest #test03CheckoutCajeroWithOneBookReturnsThePriceOfIt stamp: 'd b 11/2/2019 23:22:44'!
test03CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero
				!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:22:50'!
test03CajeroNeedsAtLeastOneBookToCheckout

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self 
		should: [cajero checkout]
			raise: Error
				withMessageText: Cajero ErrorCheckoutNeedsABook.
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:24:29'!
test03CajeroRecognizeTheBooksAndQuantityOfTheGivenList

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero addItems: self createListOfBooks.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:25:57'!
test03NewCajeroNotHaveBooksToSell

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self 
		should: [cajero checkout]
			raise: Error
				withMessageText: Cajero ErrorCheckoutNeedsABook.
				! !

!methodRemoval: CajeroTest #test03CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:26:01'!
test03CajeroNeedsAtLeastOneBookToCheckout

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self 
		should: [cajero checkout]
			raise: Error
				withMessageText: Cajero ErrorCheckoutNeedsABook.
				!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:26:07'!
test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero addItems: self createListOfBooks.
	
				! !

!methodRemoval: CajeroTest #test03CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/2/2019 23:26:10'!
test03CajeroRecognizeTheBooksAndQuantityOfTheGivenList

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero addItems: self createListOfBooks.
	
				!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:26:55' prior: 50791451!
test03NewCajeroNotHaveBooksToSell

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self assert: cajero isEmpty.
				! !

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/2/2019 23:26:57'!
ERROR!

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/2/2019 23:26:57'!
ERROR!
!Cajero methodsFor: 'binding' stamp: 'd b 11/2/2019 23:27:03'!
isEmpty
	self shouldBeImplemented.! !
!Cajero methodsFor: 'binding' stamp: 'd b 11/2/2019 23:27:07' prior: 50791510!
isEmpty
	^true.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/2/2019 23:28:25' prior: 50791474!
test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	cajero addItems: self createListOfBooks.
	self deny: cajero isEmpty.
	self assert: cajero itemCount = ((self createListOfBooks)size).
	
				! !

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/2/2019 23:28:28'!
ERROR!

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/2/2019 23:28:28'!
ERROR!
!Cajero methodsFor: '*Chalten-Time Extensions' stamp: 'd b 11/2/2019 23:28:35'!
addItems: anArray 
	self shouldBeImplemented.! !
!Cajero methodsFor: '*Chalten-Time Extensions' stamp: 'd b 11/2/2019 23:28:42' prior: 50791538!
addItems: aListOfBooks
	! !
!Cajero methodsFor: '*Chalten-Time Extensions' stamp: 'd b 11/2/2019 23:28:46' prior: 50791543!
addItems: aListOfBooks
	! !

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/2/2019 23:29:33'!
Object subclass: #Cajero
	instanceVariableNames: 'priceList items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cajero methodsFor: '*Chalten-Time Extensions' stamp: 'd b 11/2/2019 23:29:31' prior: 50791547!
addItems: aListOfBooks
	items := aListOfBooks.
	! !

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/2/2019 23:29:45'!
FAILURE!
!Cajero methodsFor: 'binding' stamp: 'd b 11/2/2019 23:30:18' prior: 50791514!
isEmpty
	^items size = 0.! !

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:30:24'!
FAILURE!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:30:24'!
FAILURE!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/2/2019 23:30:32'!
PASSED!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:30:43'!
FAILURE!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:30:43'!
FAILURE!
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:31:37' prior: 50791409!
checkout
	items isEmpty ifTrue: [^self error: Cajero ErrorNoBooks].! !
!Cajero class methodsFor: 'associating' stamp: 'd b 11/2/2019 23:31:51'!
ErrorNoBooks
	^'No hay libros que checkoutear'! !

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:31:56'!
FAILURE!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:31:56'!
FAILURE!
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:32:12' prior: 50791587!
checkout
	items isEmpty ifTrue: [^self error: Cajero ErrorNoBooks].
	
	^self! !
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:32:38' prior: 50791604!
checkout
	items isEmpty ifTrue: [^self error: Cajero ErrorCheckoutNeedsABook ].
	
	^self! !
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:32:54' prior: 50791317!
initializeWithPriceList: aPriceList
	aPriceList isEmpty ifTrue: [^self error: Cajero ErrorPriceListNeeded ].
	priceList := aPriceList.
	items := OrderedCollection new.
	^self.! !

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/2/2019 23:33:03'!
PASSED!

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/2/2019 23:33:04'!
PASSED!
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/2/2019 23:34:35'!
itemCount
	^items size! !

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/2/2019 23:34:50'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/3/2019 21:02:00'!
PASSED!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/3/2019 21:02:04'!
PASSED!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/3/2019 21:02:04'!
PASSED!

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/3/2019 21:02:04'!
PASSED!

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/3/2019 21:02:04'!
PASSED!

!testRun: #CajeroTest #test05CheckoutCajeroWithOneBookReturnsThePriceOfIt stamp: 'd b 11/3/2019 21:02:04'!
PASSED!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/3/2019 21:02:06'!
PASSED!

!testRun: #CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/3/2019 21:02:06'!
PASSED!

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/3/2019 21:02:06'!
PASSED!

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/3/2019 21:02:06'!
PASSED!

!testRun: #CajeroTest #test05CheckoutCajeroWithOneBookReturnsThePriceOfIt stamp: 'd b 11/3/2019 21:02:06'!
PASSED!

Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Card category: #TusLibros stamp: 'd b 11/3/2019 21:03:58'!
Object subclass: #Card
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #CadTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #CadTest category: #TusLibros stamp: 'd b 11/3/2019 21:04:07'!
TestCase subclass: #CadTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!CardTest methodsFor: 'nil' stamp: 'd b 11/3/2019 21:11:57'!
test01NumeroDeTarjetaNoPuedeTenerLetras

	self 
		should: [Card initializeWithNumber: '12342A' owner: 'gonzalo' expiration: ''] 
			raise: Error - MessageNotUnderstood 
				withMessageText: [].! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:12:09' prior: 50791718!
test01NumeroDeTarjetaNoPuedeTenerLetras

	self 
		should: [Card initializeWithNumber: '12342A' owner: 'gonzalo' expiration: ''] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.! !

GregorianDateTime now.!

October of: 2019.!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:14:55' prior: 50791728!
test01NumeroDeTarjetaNoPuedeTenerLetras

	self 
		should: [Card initializeWithNumber: '12342A' owner: 'gonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.! !

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:14:58'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:14:58'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:15:02'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:15:10'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:15:10'!
ERROR!
!Card class methodsFor: 'accessing' stamp: 'd b 11/3/2019 21:15:15'!
ErrorNumber
	self shouldBeImplemented.! !
!Card class methodsFor: 'accessing' stamp: 'd b 11/3/2019 21:15:23' prior: 50791765!
ErrorNumber
	^'El numero de tarjeta es invalido'! !

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:15:33'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:15:33'!
ERROR!
!Card class methodsFor: 'instance creation' stamp: 'd b 11/3/2019 21:15:48'!
initializeWithNumber: aString owner: aString2 expiration: aGregorianMonthOfYear 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeInitializeWithNumber: aString owner: aString2 expiration: aGregorianMonthOfYear ! !
!Card class methodsFor: 'instance creation' stamp: 'd b 11/3/2019 21:16:30' prior: 50791780!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	^self new initializeWithNumber: aNumber owner: aNumber expiration: aGregorianMonthOfYear.! !

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:16:37'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:16:39'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:16:46'!
ERROR!

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:16:46'!
ERROR!

!classDefinition: #Card category: #TusLibros stamp: 'd b 11/3/2019 21:17:02'!
Object subclass: #Card
	instanceVariableNames: 'number'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Card category: #TusLibros stamp: 'd b 11/3/2019 21:17:02'!
Object subclass: #Card
	instanceVariableNames: 'number gregorianMonthOfYear'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Card methodsFor: 'no messages' stamp: 'd b 11/3/2019 21:18:40'!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:18:46' prior: 50791826!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
! !
!Card methodsFor: 'nil' stamp: 'd b 11/3/2019 21:19:00'!
assertNumberIsInvalid: aNumber
! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:19:39' prior: 50791839!
assertNumberIsInvalid: aString! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:21:56' prior: 50791843!
assertNumberIsInvalid: aString
	aString allSatisfy: [:char | char isDigit] ifFalse: [^self error: Card ].! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:22:02' prior: 50791847!
assertNumberIsInvalid: aString
	
	(aString allSatisfy: [:char | char isDigit]) ifFalse: [^self error: Card ].! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:22:11' prior: 50791854!
assertNumberIsInvalid: aString
	
	(aString allSatisfy: [:char | char isDigit]) ifFalse: [^self error: Card ErrorNumber ].! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:22:36'!
assertNumberIsValid: aString
	
	(aString allSatisfy: [:char | char isDigit]) ifFalse: [^self error: Card ErrorNumber ].! !

!methodRemoval: Card #assertNumberIsInvalid: stamp: 'd b 11/3/2019 21:22:36'!
assertNumberIsInvalid: aString
	
	(aString allSatisfy: [:char | char isDigit]) ifFalse: [^self error: Card ErrorNumber ].!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:22:49' prior: 50791833!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
	! !

Object subclass: #Card
	instanceVariableNames: 'creditNumber expiration owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Card category: #TusLibros stamp: 'd b 11/3/2019 21:23:02'!
Object subclass: #Card
	instanceVariableNames: 'creditNumber expiration owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:23:22' prior: 50791881!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
	owner := aNumber .
	expiration := aGregorianMonthOfYear .
	creditNumber  := aNumber .! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:23:29' prior: 50791900!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
	owner := aNumber .
	expiration := aGregorianMonthOfYear .
	creditNumber  := aNumber .
	^self.! !

!testRun: #CardTest #test01NumeroDeTarjetaNoPuedeTenerLetras stamp: 'd b 11/3/2019 21:23:39'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:24:34'!
test01NumeroDeTarjetaNoPuedeSerVacio
	self 
		should: [Card initializeWithNumber: '' owner: 'gonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:24:38' prior: 50791923!
test01NumeroDeTarjetaNoPuedeSerVacio
	self 
		should: [Card initializeWithNumber: '' owner: 'gonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:24:45'!
test02NumeroDeTarjetaNoPuedeSerVacio
	self 
		should: [Card initializeWithNumber: '' owner: 'gonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.! !

!methodRemoval: CardTest #test01NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:24:45'!
test01NumeroDeTarjetaNoPuedeSerVacio
	self 
		should: [Card initializeWithNumber: '' owner: 'gonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber.!

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:24:48'!
FAILURE!

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:24:48'!
FAILURE!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:25:30' prior: 50791868!
assertNumberIsValid: aString
	
	(aString allSatisfy: [:char | char isDigit]) & (aString isEmpty ) ifFalse: [^self error: Card ErrorNumber ].
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:25:44' prior: 50791969!
assertNumberIsValid: aString
	
	(aString allSatisfy: [:char | char isDigit]) & (aString isEmpty= false) ifFalse: [^self error: Card ErrorNumber ].
	! !

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:25:48'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:26:17'!
test03DueoDeTarjetaNoPuedeSerVacio
	self 
		should: [Card initializeWithNumber: '213' owner: '' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorOwner.! !
!Card class methodsFor: 'accessing' stamp: 'd b 11/3/2019 21:26:34'!
ErrorOwner
	^'El nombre del owner es invalido'! !

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:26:41'!
FAILURE!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:26:41'!
FAILURE!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:27:36'!
assertOwnerIsValid: aString
	
	(aString allSatisfy: [:char | char isLetter]) & (aString isEmpty= false) ifFalse: [^self error: Card ErrorNumber ].
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:27:39' prior: 50792008!
assertOwnerIsValid: aString
	
	(aString allSatisfy: [:char | char isLetter]) & (aString isEmpty= false) ifFalse: [^self error: Card ErrorOwner ].
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:27:49' prior: 50791910!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
	self assertOwnerIsValid: aName.
	owner := aNumber .
	expiration := aGregorianMonthOfYear .
	creditNumber  := aNumber .
	^self.! !

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:28:00'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:28:25'!
test03DueoDeTarjetaNoPuedeTenerMasDe30Caracteres
	self 
		should: [Card initializeWithNumber: '213' owner: 'gonzalogonzalogonzalogonzalogonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorOwner.! !

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:28:26'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:28:40'!
test04DueoDeTarjetaNoPuedeTenerMasDe30Caracteres
	self 
		should: [Card initializeWithNumber: '213' owner: 'gonzalogonzalogonzalogonzalogonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorOwner.! !

!methodRemoval: CardTest #test03DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:28:40'!
test03DueoDeTarjetaNoPuedeTenerMasDe30Caracteres
	self 
		should: [Card initializeWithNumber: '213' owner: 'gonzalogonzalogonzalogonzalogonzalo' expiration: (October  of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorOwner.!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:28:42'!
PASSED!

!testRun: #CardTest #test04DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:28:51'!
PASSED!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/3/2019 21:28:57'!
PASSED!

Card initializeWithNumber: '213' owner: 'gonzalogonzalogonzalogonzalogonzalo' expiration: (October  of: 2020)!

aString!

Card initializeWithNumber: '213' owner: 'gonzalogonzalogonzalogonzalogonzalo' expiration: (October  of: 2020)!

aName!

aNumber!

aGregorianMonthOfYear !
!Card class methodsFor: 'instance creation' stamp: 'd b 11/3/2019 21:31:18' prior: 50791792!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	^self new initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear.! !

!testRun: #CardTest #test04DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:31:21'!
FAILURE!

!testRun: #CardTest #test04DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:31:21'!
FAILURE!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:32:06' prior: 50792016!
assertOwnerIsValid: aString
	
	(aString allSatisfy: [:char | char isLetter]) & (aString isEmpty= false) & (aString size <= 30) ifFalse: [^self error: Card ErrorOwner ].
	! !

!testRun: #CardTest #test04DueoDeTarjetaNoPuedeTenerMasDe30Caracteres stamp: 'd b 11/3/2019 21:32:10'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:33:15'!
test04LaFechaDeExpiracionNoPuedeEstarVencida
	self 
		should: [Card initializeWithNumber: '213' owner: 'Lucas' expiration: (October  of: 2019)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorExpirationDate.! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:33:24'!
test05LaFechaDeExpiracionNoPuedeEstarVencida
	self 
		should: [Card initializeWithNumber: '213' owner: 'Lucas' expiration: (October  of: 2019)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorExpirationDate.! !

!methodRemoval: CardTest #test04LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:33:24'!
test04LaFechaDeExpiracionNoPuedeEstarVencida
	self 
		should: [Card initializeWithNumber: '213' owner: 'Lucas' expiration: (October  of: 2019)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorExpirationDate.!

!testRun: #CardTest #test05LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:33:27'!
ERROR!

!testRun: #CardTest #test05LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:33:27'!
ERROR!
!Card class methodsFor: 'instance creation' stamp: 'd b 11/3/2019 21:33:33'!
ErrorExpirationDate
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeErrorExpirationDate! !
!Card class methodsFor: 'instance creation' stamp: 'd b 11/3/2019 21:33:45' prior: 50792159!
ErrorExpirationDate
	^'La fecha de expiracion es invalida'.! !

!testRun: #CardTest #test05LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:34:03'!
FAILURE!

!testRun: #CardTest #test05LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:34:03'!
FAILURE!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:34:47' prior: 50792024!
initializeWithNumber: aNumber owner: aName expiration: aGregorianMonthOfYear 
	self assertNumberIsValid: aNumber.
	self assertOwnerIsValid: aName.
	self assertFechaEstaVigente: aGregorianMonthOfYear.
	owner := aNumber .
	expiration := aGregorianMonthOfYear .
	creditNumber  := aNumber .
	^self.! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:35:02'!
assertFechaEstaVigente: aGregorianDate
		
	aGregorianDate ! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:35:14' prior: 50792191!
assertFechaEstaVigente: aGregorianMonthOfYear
		
! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:35:19' prior: 50792132!
test05LaFechaDeExpiracionNoPuedeEstarVencida
	self 
		should: [Card initializeWithNumber: '213' owner: 'Lucas' expiration: (October of: 2019)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorExpirationDate.! !

GregorianMonthOfYear now.!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:36:26' prior: 50792196!
assertFechaEstaVigente: aGregorianMonthOfYear
		
	aGregorianMonthOfYear 
! !

October of: 2020.!

(October of: 2020) > (October of: 2021).!

(October of: 2020) > (October of: 2019).!

GregorianMonthOfYear !

GregorianMonthOfYear !

GregorianMonthOfYear today.!

Date today .!

GregorianMonthOfYear current !

November of: 2019 > GregorianMonthOfYear current.!

(November of: 2019) > (GregorianMonthOfYear current).!
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:40:39' prior: 50792212!
assertFechaEstaVigente: aGregorianMonthOfYear
		
	(aGregorianMonthOfYear > (GregorianMonthOfYear current)) ifFalse: [^self error: Card ErrorExpirationDate ].
! !

!testRun: #CardTest #test05LaFechaDeExpiracionNoPuedeEstarVencida stamp: 'd b 11/3/2019 21:40:53'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:41:26'!
test06NumeroDeTarjetaDebeSerPositivo
	self 
		should: [Card initializeWithNumber: '-213' owner: 'Lucas' expiration: (October of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber .! !

!testRun: #CardTest #test06NumeroDeTarjetaDebeSerPositivo stamp: 'd b 11/3/2019 21:41:28'!
PASSED!
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:41:46'!
test06NumeroDeTarjetaDebeSerEntero
	self 
		should: [Card initializeWithNumber: '-213' owner: 'Lucas' expiration: (October of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber .! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:41:50' prior: 50792252!
test06NumeroDeTarjetaDebeSerEntero
	self 
		should: [Card initializeWithNumber: '1/3' owner: 'Lucas' expiration: (October of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber .! !
!CardTest methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:41:56'!
test07NumeroDeTarjetaDebeSerEntero
	self 
		should: [Card initializeWithNumber: '1/3' owner: 'Lucas' expiration: (October of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber .! !

!methodRemoval: CardTest #test06NumeroDeTarjetaDebeSerEntero stamp: 'd b 11/3/2019 21:41:58'!
test06NumeroDeTarjetaDebeSerEntero
	self 
		should: [Card initializeWithNumber: '1/3' owner: 'Lucas' expiration: (October of: 2020)] 
			raise: Error - MessageNotUnderstood 
				withMessageText: Card ErrorNumber .!

!testRun: #CardTest #test07NumeroDeTarjetaDebeSerEntero stamp: 'd b 11/3/2019 21:41:59'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:45:48' prior: 50791412!
test05CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:46:32'!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	
				! !

!methodRemoval: CajeroTest #test05CheckoutCajeroWithOneBookReturnsThePriceOfIt stamp: 'd b 11/3/2019 21:46:32'!
test05CheckoutCajeroWithOneBookReturnsThePriceOfIt

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	
				!

!methodRemoval: CajeroTest #test02CajeroNeedsAtLeastOneBookToCheckout stamp: 'd b 11/3/2019 21:46:46'!
test02CajeroNeedsAtLeastOneBookToCheckout

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self 
		should: [cajero checkout]
			raise: Error
				withMessageText: Cajero ErrorCheckoutNeedsABook.
				!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:48:17' prior: 50792303!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| expiredCard cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	
	self should: [expiredCard := self expiredCard.]
		raise:  Error - MessageNotUnderstood
			withMessageText: ''.
	cajero checkOutWithCard: expiredCard! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:48:39' prior: 50792332!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| expiredCard cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	expiredCard := self expiredCard.
	self should: [cajero checkOutWithCard: expiredCard]
		raise:  Error - MessageNotUnderstood
			withMessageText: ''.
	! !

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:48:41'!
ERROR!

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:48:41'!
ERROR!
!TestCase methodsFor: 'accessing' stamp: 'd b 11/3/2019 21:48:51'!
expiredCard
	self shouldBeImplemented.! !
!TestCase methodsFor: 'accessing' stamp: 'd b 11/3/2019 21:49:26' prior: 50792365!
expiredCard
	|card|
	card := Card initializeWithNumber: '121212' owner: 'jose' expiration: (December of: 2014).
	^card! !

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:49:32'!
ERROR!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:50:40' prior: 50792345!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self should: [cajero checkOutWithCardNumber: '121' owner: 'jose' expirationDate: (December of: 2014)]
		raise:  Error - MessageNotUnderstood
			withMessageText: ''.
	! !
!Cajero class methodsFor: 'associating' stamp: 'd b 11/3/2019 21:51:14'!
ErrorCardExpired
	^'La tarjeta esta vencida'.! !
!Cajero methodsFor: 'as yet unclassified' stamp: 'd b 11/3/2019 21:52:51'!
checkOutWithCardNumber: aStringOfCardNumber owner: aName expirationDate: aGregorianMonthOfYear
	| card |
	
	card := Card initializeWithNumber: aStringOfCardNumber owner: aName  expiration: aGregorianMonthOfYear .
	
	^self.! !

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:52:57'!
FAILURE!

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:52:57'!
FAILURE!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:53:21' prior: 50792379!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self should: [cajero checkOutWithCardNumber: '121' owner: 'jose' expirationDate: (December of: 2014)]
		raise:  Error - MessageNotUnderstood
			withMessageText: Card ErrorExpirationDate .
	! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/3/2019 21:55:03' prior: 50792413!
test05CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero priceList |
	
	priceList := self createPriceList.
	cajero := Cajero new initializeWithPriceList: priceList.
	self should: [cajero checkOutWithCardNumber: '121' owner: 'jose' expirationDate: (December of: 2014)]
		raise:  Error - MessageNotUnderstood
			withMessageText: Card ErrorExpirationDate .
	"q error usar ahi?"! !

!testRun: #CajeroTest #test05CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/3/2019 21:55:05'!
PASSED!

!testRun: #CajeroTest #test03NewCajeroNotHaveBooksToSell stamp: 'd b 11/3/2019 21:55:08'!
PASSED!

!testRun: #CajeroTest #test01CajeroNeedsANonEmptyPriceList stamp: 'd b 11/3/2019 21:55:09'!
PASSED!

!testRun: #CajeroTest #test04CajeroRecognizeTheBooksAndQuantityOfTheGivenList stamp: 'd b 11/3/2019 21:55:10'!
PASSED!

----STARTUP---- (5 November 2019 21:35:25) as /home/diego/linux64/CuisUniversity-3938.image!


!classRemoval: #TusLibrosApi stamp: 'd b 11/5/2019 21:35:43'!
Object subclass: #TusLibrosApi
	instanceVariableNames: 'tusLibrosStorageManager'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #StorageManager stamp: 'd b 11/5/2019 21:35:44'!
Object subclass: #StorageManager
	instanceVariableNames: 'books clients carts'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #Cart stamp: 'd b 11/5/2019 21:35:44'!
Object subclass: #Cart
	instanceVariableNames: 'books last_transaction clientOwner'
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

!classRemoval: #ApiCarritoTests stamp: 'd b 11/5/2019 21:35:44'!
TestCase subclass: #ApiCarritoTests
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: '25-TusLibros'!

----End fileIn of /home/diego/linux64/TusLibros.st----!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/5/2019 21:36:19'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/5/2019 21:36:19'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:36:19'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:36:19'!
FAILURE!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:36:19'!
FAILURE!

!testRun: #CardTest #test01NumeroDeTarjetaSoloPuedeTenerNumeros stamp: 'd b 11/5/2019 21:36:22'!
PASSED!

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/5/2019 21:36:22'!
PASSED!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/5/2019 21:36:22'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test09NewCartHasZeroTotalAmount stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test10CartWithABookHasATotalAmountOfTheBooksPrice stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test11CartWith2SameBooksHasATotalAmountOfTheBooksPriceTwice stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CartTest #test12CartWithBooksHasATotalAmountOfTheBooksPrices stamp: 'd b 11/5/2019 21:36:23'!
PASSED!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/5/2019 21:36:24'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/5/2019 21:36:24'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:36:24'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:36:24'!
FAILURE!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:36:24'!
FAILURE!

!methodRemoval: Cajero #checkOutWithCardNumber:owner:expirationDate: stamp: 'd b 11/5/2019 21:42:24'!
checkOutWithCardNumber: aStringOfCardNumber owner: aName expirationDate: aGregorianMonthOfYear
	
	
	| cardd |
	cardd := Card initializeWithNumber: aStringOfCardNumber owner: aName  expiration: aGregorianMonthOfYear .
	
	^self.!
!Cajero methodsFor: 'casing' stamp: 'd b 11/5/2019 21:42:58' prior: 50792813!
checkoutOnADate: aDate
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	cart forEachElementApply: [].
	^cart montoTotal.
	! !
!Cajero methodsFor: 'casing' stamp: 'd b 11/5/2019 21:43:24' prior: 50793134!
checkoutOnADate: aDate
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	cart forEachElementApply: [:element ].
	^cart montoTotal.
	! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:43:53' prior: 50792544!
test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro

	| cajero creditCard valorVenta |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	valorVenta := cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 200 equals: valorVenta. 
	
				! !
!Cajero methodsFor: 'casing' stamp: 'd b 11/5/2019 21:44:20'!
checkoutOnADate: aDate andRegisterOn: historyLog .
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	cart forEachElementApply: [:element ].
	^cart montoTotal.
	! !

!methodRemoval: Cajero #checkoutOnADate: stamp: 'd b 11/5/2019 21:44:24'!
checkoutOnADate: aDate
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	cart forEachElementApply: [:element ].
	^cart montoTotal.
	!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:44:38' prior: 50792526!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: 'Juans Book'.
	
	
	cajero := Cajero with: cart andCreditCard: creditCard andHistoryBook: sellBook. 
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:44:54' prior: 50792510!
test02CajeroCanNotCheckoutWithEmptyCart

	| cajero creditCard |
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero with: cart andCreditCard: creditCard andHistoryBook: sellBook.
	self should: [cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero CarritoVacio.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:44:59' prior: 50792561!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero with: cart andCreditCard: creditCard andHistoryBook: sellBook.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook ..
	
	self assert: 1 equals: sellBook size.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:45:01' prior: 50793219!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero with: cart andCreditCard: creditCard andHistoryBook: sellBook.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:45:14' prior: 50793237!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:45:22' prior: 50793182!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: 'Juans Book'.
	
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:45:26' prior: 50793201!
test02CajeroCanNotCheckoutWithEmptyCart

	| cajero creditCard |
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	self should: [cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero CarritoVacio.
	
				! !

!methodRemoval: Cajero class #with:andCreditCard:andHistoryBook: stamp: 'd b 11/5/2019 21:45:50'!
with: aCart andCreditCard: aCard andHistoryBook: aSellBook 
	^self new initializeWith: aCart andCreditCard: aCard andHistoryBook: aSellBook!

!methodRemoval: Cajero #initializeWith:andCreditCard:andHistoryBook: stamp: 'd b 11/5/2019 21:45:56'!
initializeWith: aCart andCreditCard: aCard andHistoryBook: aSellBook 
	cart := aCart.
	card := aCard.
	sellBook := aSellBook.!

!methodRemoval: Cajero #initializeWithPriceList: stamp: 'd b 11/5/2019 21:45:59'!
initializeWithPriceList: aPriceList
	aPriceList isEmpty ifTrue: [^self error: Cajero ErrorPriceListNeeded ].
	priceList := aPriceList.
	items := OrderedCollection new.
	^self.!

!methodRemoval: Cajero #itemCount stamp: 'd b 11/5/2019 21:46:42'!
itemCount
	^items size!

Object subclass: #Cajero
	instanceVariableNames: 'cart card'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/5/2019 21:46:55'!
Object subclass: #Cajero
	instanceVariableNames: 'cart card'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/5/2019 21:46:58'!
ERROR!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/5/2019 21:46:58'!
ERROR!
!Cajero methodsFor: 'initialization' stamp: 'd b 11/5/2019 21:47:13' prior: 50792801!
initializeWith: aCart andCreditCard: aCard 
	cart := aCart.
	card := aCard.! !

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/5/2019 21:47:16'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/5/2019 21:47:17'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:47:18'!
ERROR!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:47:18'!
ERROR!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/5/2019 21:47:44' prior: 50793166!
checkoutOnADate: aDate andRegisterOn: historyLog .
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !
!Cart methodsFor: 'queries' stamp: 'd b 11/5/2019 21:47:59'!
forEachElementApply: aBlockToApply
	! !
!Cart methodsFor: 'queries' stamp: 'd b 11/5/2019 21:48:28' prior: 50793379!
forEachElementApply: aBlockToApply
	aBlockToApply value: items.! !

a:=#(1 2 3)!

c:=0.!

b := [:item :d  | c:=item+d].!

|a b c|!

c:=0.!

b := [:item :d  | c:=item+d].!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:50:30'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:50:34'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:53:07' prior: 50793255!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	self assert: 'Juans Book' equals: (sellBook at: 1).
				! !

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:53:30'!
FAILURE!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:53:30'!
FAILURE!

sellBook !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/5/2019 21:54:34' prior: 50793370!
checkoutOnADate: aDate andRegisterOn: historyLog .
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	self halt.
	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !

items !

aBlockToApply value: items!

aBlockToApply value: items.!

aBlockToApply!
!Cart methodsFor: 'queries' stamp: 'd b 11/5/2019 21:56:29' prior: 50793383!
forEachElementApply: aBlockToApply
	items do: aBlockToApply.! !

items do: aBlockToApply!

historyLog!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/5/2019 21:57:36' prior: 50793425!
checkoutOnADate: aDate andRegisterOn: historyLog .
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	
	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/5/2019 21:57:38'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/5/2019 21:57:40'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:58:00'!
test06CajeroVendeDosLibrosYFiguranEnElLibro

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	self assert: 'Juans Book' equals: (sellBook at: 1).
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:58:46' prior: 50793459!
test06CajeroVendeDosLibrosYFiguranEnElLibro

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	cart add: 'coso'.
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).

	cajero := Cajero with: cart andCreditCard: creditCard.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 2 equals: sellBook size.
	self assert: sellBook includes: 'Juans Book'.
	self assert: sellBook includes:'coso'.
				! !

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/5/2019 21:58:48'!
ERROR!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/5/2019 21:58:48'!
ERROR!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/5/2019 21:59:12' prior: 50793478!
test06CajeroVendeDosLibrosYFiguranEnElLibro

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	cart add: 'Coso'.
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).

	cajero := Cajero with: cart andCreditCard: creditCard.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 2 equals: sellBook size.
	self assert: sellBook includes: 'Juans Book'.
	self assert: sellBook includes:'Coso'.
				! !

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/5/2019 21:59:14'!
PASSED!

----QUIT----(5 November 2019 22:48:16) CuisUniversity-3938.image priorSource: 14673069!

----STARTUP---- (6 November 2019 19:28:27) as /home/diego/linux64/CuisUniversity-3938.image!


!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test09NewCartHasZeroTotalAmount stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test10CartWithABookHasATotalAmountOfTheBooksPrice stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test11CartWith2SameBooksHasATotalAmountOfTheBooksPriceTwice stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CartTest #test12CartWithBooksHasATotalAmountOfTheBooksPrices stamp: 'd b 11/6/2019 19:28:32'!
PASSED!

!testRun: #CardTest #test01NumeroDeTarjetaSoloPuedeTenerNumeros stamp: 'd b 11/6/2019 19:28:34'!
PASSED!

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/6/2019 19:28:34'!
PASSED!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/6/2019 19:28:34'!
PASSED!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 19:28:36'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 19:28:36'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 19:28:36'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 19:28:36'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 19:28:36'!
PASSED!

TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorTest category: #TusLibros stamp: 'd b 11/6/2019 19:33:43'!
TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #MerchantProcessorSimulator category: #TusLibros stamp: 'd b 11/6/2019 19:35:12'!
Object subclass: #MerchantProcessorSimulator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!MerchantProcessorSimulator methodsFor: 'nil' stamp: 'd b 11/6/2019 19:36:43'!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
! !
!MerchantProcessorSimulator methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 19:37:26' prior: 50793623!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^'0|OK'! !
!MerchantProcessorSimulator class methodsFor: 'nil' stamp: 'd b 11/6/2019 19:38:29'!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	self new creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount.! !
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 19:38:31' prior: 50793638!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^self new creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount.! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:39:52' prior: 50793443!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response aMonthAndYear |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: card number creditCardExpiration: aMonthAndYear creditCarOwner: card owner transactionAmount: cart totalAmount.
	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:40:17' prior: 50793661!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response aMonthAndYear |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: card number creditCardExpiration: aMonthAndYear creditCarOwner: card owner transactionAmount: cart montoTotal.
	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 19:41:29'!
owner
	^owner
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 19:41:37'!
number
	^creditNumber ! !

GregorianDateTime now!

GregorianMonthOfYear current !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:44:44' prior: 50793677!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response aMonthAndYear |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: card number creditCardExpiration: aMonthAndYear creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !

GregorianDateTime!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:46:22' prior: 50793701!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response aMonthAndYear |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: card number creditCardExpiration: (card expiration) creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !
!Card methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 19:46:40'!
expiration
	^expiration! !

(GregorianMonthOfYear current dayNumber)!

(GregorianMonthOfYear current)dayNumber!

(GregorianMonthOfYear current).!

(GregorianMonthOfYear current) !

a:=(GregorianMonthOfYear current) !

a dayNumber !

a monthNumber!

a monthNumber!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:54:05' prior: 50793720!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response aMonthAndYear |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: card number creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:54:51' prior: 50793749!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := MerchantProcessorSimulator creditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !

!classRemoval: #MerchantProcessorTest stamp: 'd b 11/6/2019 19:55:04'!
TestCase subclass: #MerchantProcessorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 19:55:11'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 19:55:12'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 19:55:13'!
PASSED!

!classDefinition: #Cajero category: #TusLibros stamp: 'd b 11/6/2019 19:58:19'!
Object subclass: #Cajero
	instanceVariableNames: 'cart card merchantProcessorSimulator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 19:58:18' prior: 50793767!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := merchantProcessorSimulator creditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !
!Cajero methodsFor: 'initialization' stamp: 'd b 11/6/2019 19:58:51'!
initializeWith: aCart andCreditCard: aCard andMerchantProcessor: MerchantProcessorSimulator.
	cart := aCart.
	card := aCard.
	merchantProcessorSimulator:=MerchantProcessorSimulator.! !

!methodRemoval: Cajero #initializeWith:andCreditCard: stamp: 'd b 11/6/2019 19:58:54'!
initializeWith: aCart andCreditCard: aCard 
	cart := aCart.
	card := aCard.!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 19:59:07' prior: 50793272!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: 'Juans Book'.
	
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook.]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 19:59:37' prior: 50793290!
test02CajeroCanNotCheckoutWithEmptyCart

	| cajero creditCard |
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	self should: [cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero CarritoVacio.
	
				! !
!Cajero class methodsFor: 'instance creation' stamp: 'd b 11/6/2019 20:00:02'!
initializeWith: aCart andCreditCard: aCard andMerchantProcessor: MerchantProcessorSimulator.
	^self new initializeWith: aCart andCreditCard: aCard andMerchantProcessor: MerchantProcessorSimulator.! !

!methodRemoval: Cajero class #with:andCreditCard: stamp: 'd b 11/6/2019 20:00:06'!
with: aCart andCreditCard: aCard 
	^self new initializeWith: aCart andCreditCard: aCard !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:00:27' prior: 50793858!
test02CajeroCanNotCheckoutWithEmptyCart

	| cajero creditCard |
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	self should: [cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero CarritoVacio.
	
				! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:07' prior: 50793890!
test02CajeroCanNotCheckoutWithEmptyCart

	| cajero creditCard |
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	self should: [cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero CarritoVacio.
	
				! !

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 20:01:09'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:22' prior: 50793840!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: 'Juans Book'.
	
	
	cajero := Cajero with: cart andCreditCard: creditCard.
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook.]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:31' prior: 50793929!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: 'Juans Book'.
	
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook.]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:01:37'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:41' prior: 50793149!
test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro

	| cajero creditCard valorVenta |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	valorVenta := cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 200 equals: valorVenta. 
	
				! !

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:01:42'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:46' prior: 50793399!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	self assert: 'Juans Book' equals: (sellBook at: 1).
				! !

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:01:47'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:01:57' prior: 50793504!
test06CajeroVendeDosLibrosYFiguranEnElLibro

	| cajero creditCard |
	
	cart add: 'Juans Book'.
	cart add: 'Coso'.
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).

	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 2 equals: sellBook size.
	self assert: sellBook includes: 'Juans Book'.
	self assert: sellBook includes:'Coso'.
				! !

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:02:00'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:02:10'!
PASSED!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 20:03:38'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:03:38'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:03:38'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:03:38'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:03:38'!
PASSED!

!testRun: #CardTest #test01NumeroDeTarjetaSoloPuedeTenerNumeros stamp: 'd b 11/6/2019 20:03:40'!
PASSED!

!testRun: #CardTest #test02NumeroDeTarjetaNoPuedeSerVacio stamp: 'd b 11/6/2019 20:03:40'!
PASSED!

!testRun: #CardTest #test03DueoDeTarjetaNoPuedeSerVacio stamp: 'd b 11/6/2019 20:03:40'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test09NewCartHasZeroTotalAmount stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test10CartWithABookHasATotalAmountOfTheBooksPrice stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test11CartWith2SameBooksHasATotalAmountOfTheBooksPriceTwice stamp: 'd b 11/6/2019 20:03:41'!
PASSED!

!testRun: #CartTest #test12CartWithBooksHasATotalAmountOfTheBooksPrices stamp: 'd b 11/6/2019 20:03:41'!
PASSED!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 20:08:01' prior: 50793809!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := merchantProcessorSimulator transactionWithcreditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !
!MerchantProcessorSimulator methodsFor: 'init' stamp: 'd b 11/6/2019 20:08:15'!
transactionWithcreditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^'0|OK'! !

!methodRemoval: MerchantProcessorSimulator #creditCardNumber:creditCardExpiration:creditCarOwner:transactionAmount: stamp: 'd b 11/6/2019 20:08:18'!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^'0|OK'!
!MerchantProcessorSimulator class methodsFor: 'as yet unclassified' stamp: 'd b 11/6/2019 20:08:23'!
transactionWithcreditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^self new creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount.! !

!methodRemoval: MerchantProcessorSimulator class #creditCardNumber:creditCardExpiration:creditCarOwner:transactionAmount: stamp: 'd b 11/6/2019 20:08:25'!
creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^self new creditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount.!
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 20:08:36' prior: 50794111!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := merchantProcessorSimulator transactionWithcreditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.
	response = '0|OK' ifTrue: [
							cart forEachElementApply: [:element | historyLog add: element].
							^cart montoTotal.
						] ifFalse:[
							^0.
						].
	
	! !

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 20:08:38'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:08:38'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:08:38'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:08:38'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:08:38'!
PASSED!
!MerchantProcessorSimulator methodsFor: 'init' stamp: 'd b 11/6/2019 20:15:47' prior: 50794129!
transactionWithcreditCardNumber: aCreditCarNumber creditCardExpiration: aMonthAndYear creditCarOwner: aString transactionAmount: anAmount
	^anAmount ! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 20:17:27' prior: 50794171!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := merchantProcessorSimulator transactionWithcreditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.

	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 20:17:33' prior: 50794215!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	response := merchantProcessorSimulator transactionWithcreditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.

	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !
!Cajero methodsFor: 'accessing' stamp: 'd b 11/6/2019 20:18:12' prior: 50794231!
checkoutOnADate: aDate andRegisterOn: historyLog 
	| response |
	self assertCarritoNoVacio.
	self assertTarjetaNoVencida: aDate.
	merchantProcessorSimulator transactionWithcreditCardNumber: (card number) creditCardExpiration: card expiration creditCarOwner: card owner transactionAmount: cart montoTotal.

	cart forEachElementApply: [:element | historyLog add: element].
	^cart montoTotal.
	! !

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 20:18:17'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:18:17'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:18:17'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:18:17'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:18:17'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:18:20'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:18:50'!
aBook
	^'Juans Book'! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:18:57'!
anotherBook
	^'Coso'! !
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:19:07' prior: 50793947!
test03CajeroNoPuedeCheckoutearTarjetaVencida

	| cajero creditCard |

	creditCard := Card initializeWithNumber:  '123654' owner: 'DBuzeta' expiration: (October of: 2015). 	
	
	cart add: self aBook.
	
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	
	self should: [ cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook.]
		raise: Error - MessageNotUnderstood 
		withMessageText: Cajero TarjetaVencida.! !

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:19:08'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:19:14' prior: 50793970!
test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro

	| cajero creditCard valorVenta |
	
	cart add: self aBook.
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	valorVenta := cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 200 equals: valorVenta. 
	
				! !

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:19:15'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:19:23' prior: 50793993!
test05CajeroAadeNuevoRegistroALibroDeVentas

	| cajero creditCard |
	
	cart add: self aBook .
	
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).
	
	self assert: sellBook isEmpty.
	
	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 1 equals: sellBook size.
	self assert: 'Juans Book' equals: (sellBook at: 1).
				! !

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:19:24'!
PASSED!
!CajeroTest methodsFor: 'tests' stamp: 'd b 11/6/2019 20:19:34' prior: 50794017!
test06CajeroVendeDosLibrosYFiguranEnElLibro

	| cajero creditCard |
	
	cart add: self aBook .
	cart add: self anotherBook .
	creditCard := Card initializeWithNumber: '123123' owner: 'ggg' expiration: (December of: 2040).

	cajero := Cajero initializeWith: cart andCreditCard: creditCard andMerchantProcessor: MerchantProcessorSimulator new.
	cajero checkoutOnADate: (FixedGregorianDate monthOfYear: (October of: 2020) dayNumber: 22) andRegisterOn: sellBook .
	
	self assert: 2 equals: sellBook size.
	self assert: sellBook includes: 'Juans Book'.
	self assert: sellBook includes:'Coso'.
				! !

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:19:35'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test09NewCartHasZeroTotalAmount stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test10CartWithABookHasATotalAmountOfTheBooksPrice stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test11CartWith2SameBooksHasATotalAmountOfTheBooksPriceTwice stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CartTest #test12CartWithBooksHasATotalAmountOfTheBooksPrices stamp: 'd b 11/6/2019 20:23:26'!
PASSED!

!testRun: #CajeroTest #test02CajeroCanNotCheckoutWithEmptyCart stamp: 'd b 11/6/2019 20:23:28'!
PASSED!

!testRun: #CajeroTest #test03CajeroNoPuedeCheckoutearTarjetaVencida stamp: 'd b 11/6/2019 20:23:28'!
PASSED!

!testRun: #CajeroTest #test04CajeroVendeLibroYElMontoCobradoEsElPrecioDelLibro stamp: 'd b 11/6/2019 20:23:28'!
PASSED!

!testRun: #CajeroTest #test05CajeroAadeNuevoRegistroALibroDeVentas stamp: 'd b 11/6/2019 20:23:28'!
PASSED!

!testRun: #CajeroTest #test06CajeroVendeDosLibrosYFiguranEnElLibro stamp: 'd b 11/6/2019 20:23:28'!
PASSED!

----QUIT----(6 November 2019 20:23:48) CuisUniversity-3938.image priorSource: 14780022!